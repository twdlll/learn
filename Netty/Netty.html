<!DOCTYPE html>
<!-- saved from url=(0016)http://localhost -->
<html>
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Netty</title>
    <style>
        body{
            margin: 0;
        }
        #content-info{
            width: auto;
            margin: 0 auto;
            text-align: center;
        }
        #author-info{
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
        }
        #title{
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
            padding-top: 10px;
            margin-bottom: 2px;
            font-size: 34px;
            color: #505050;
        }
        .text{
            white-space:nowrap;
            text-overflow: ellipsis;
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 2px;
            font-size: 20px;
            color: #8c8c8c;
        }
        #navBar{
            width: auto;
            height: auto;
            position: fixed;
            right:0;
            bottom: 0;
            background-color: #f0f3f4;
            overflow-y: auto;
            text-align: center;
        }
        #svg-container{
            width: 100%;
            overflow-x: scroll;
            min-width: 0px;
            margin: 0 10px;
        }
        #nav-thumbs{
            overflow-y: scroll;
            padding: 0 5px;
        }
        .nav-thumb{
            position: relative;
            margin: 10px auto;
        }
        .nav-thumb >p{
            text-align: center;
            font-size: 12px;
            margin: 4px 0 0 0;
        }
        .nav-thumb >div{
            position: relative;
            display: inline-block;
            border: 1px solid #c6cfd5;
        }
        .nav-thumb img{
            display: block;
        }
        #main-content{
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #d0cfd8;
            display: flex;
            height: auto;
            flex-flow: row wrap;
            text-align:center;
        }
        #svg-container >svg{
            display: block;
            margin:10px auto;
            margin-bottom: 0;
        }
        #copyright{
            bottom: 0;
            left: 50%;
            margin: 5px auto;
            font-size: 16px;
            color: #515151;
        }
        #copyright >a{
            text-decoration: none;
            color: #77C;
        }
        .number{
            position: absolute;
            top:0;
            left:0;
            border-top:22px solid #08a1ef;
            border-right: 22px solid transparent;
        }
        .pagenum{
            font-size: 12px;
            color: #fff;
            position: absolute;
            top: -23px;
            left: 2px;
        }
            #navBar::-webkit-scrollbar{
            width: 8px;
            background-color: #f5f5f5;
        }
            #navBar::-webkit-scrollbar-track{
            -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,.3);
            border-radius: 8px;
            background-color: #fff;
        }
            #navBar::-webkit-scrollbar-thumb{
            border-radius: 8px;
            -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,.3);
            background-color: #6b6b70;
        }
        #navBar::-webkit-scrollbar-thumb:hover{
            background-color: #4a4a4f;
        }
</style>
  </head>
  <body>
    <div id="main-area">
      <div id="main-content">
        <div id="svg-container"><svg xmlns:xlink="http://www.w3.org/1999/xlink" height="782" ed:name="Page-1" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:ed="https://www.edrawsoft.cn/xml/2017/SVGExtensions/" ed:hSpacing="30" width="1494" ed:vSpacing="30" viewBox="0 0 1494 782" id="page1" preserveAspectRadio="xMinYMin meet">
    <style type="text/css"><![CDATA[
g[ed\:togtopicid],g[ed\:hyperlink],g[ed\:comment],g[ed\:note] {cursor:pointer;}
g[id] {-moz-user-select: none;-ms-user-select: none;user-select: none;}
svg text::selection,svg tspan::selection{background-color: #4285f4;color: #ffffff;fill: #ffffff;}
.st16 {fill:#454545;font-family:Consolas;font-size:10pt}
.st17 {fill:#454545;font-family:Consolas;font-size:12pt}
.st15 {fill:#454545;font-family:Consolas;font-size:14pt}
.st18 {fill:#ffffff;font-family:Consolas;font-size:11pt}
]]></style>
    <defs>
        <linearGradient y2="100%" y1="0%" x1="0%" x2="0%" id="lg5">
            <stop offset="0" stop-color="#ffffff"/>
            <stop offset="0.25" stop-color="#f0f5f0"/>
            <stop offset="0.75" stop-color="#e1ebe1"/>
            <stop offset="1" stop-color="#c8d7c8"/>
        </linearGradient>
    </defs>
    <rect height="782" y="0" x="0" width="1494" fill="#fbfcfb"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="104" stroke-linecap="round" d="M-13.5,54.8C5.4,54.8,-13.5,-54.8,13.5,-54.8" transform="matrix(1,0,0,1,638,100)" stroke-width="2" id="103" ed:tosuperid="102" fill="none"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="101" d="M-28.6,90.5C-29.2,92.2,-28.7,93.7,-27.4,94.2C-26.1,94.8,-24.6,94.1,-24,92.4C-23.1,90.2,-22.2,88,-21.5,85.7C-20.7,83.4,-20,81.2,-19.4,78.9C-18.8,76.6,-18.2,74.3,-17.6,72C-17.1,69.7,-16.6,67.4,-16.1,65.1C-15.6,62.8,-15.1,60.5,-14.7,58.2C-14.3,55.9,-13.9,53.6,-13.5,51.3C-13.1,49,-12.7,46.7,-12.4,44.3C-12,42,-11.7,39.7,-11.3,37.4C-11,35.1,-10.7,32.8,-10.4,30.5C-10.1,28.1,-9.7,25.8,-9.4,23.5C-9.1,21.2,-8.8,18.9,-8.5,16.6C-8.2,14.2,-7.9,11.9,-7.6,9.6C-7.3,7.3,-7,5,-6.7,2.7C-6.4,0.4,-6.1,-1.9,-5.8,-4.3C-5.5,-6.6,-5.2,-8.9,-4.9,-11.2C-4.6,-13.5,-4.2,-15.8,-3.9,-18.1C-3.5,-20.4,-3.2,-22.7,-2.8,-25C-2.5,-27.3,-2.1,-29.6,-1.7,-31.9C-1.3,-34.2,-0.9,-36.5,-0.4,-38.7C0,-41,0.5,-43.3,0.9,-45.6C1.4,-47.9,1.9,-50.1,2.4,-52.4C3,-54.7,3.5,-56.9,4.1,-59.1C4.7,-61.4,5.4,-63.6,6,-65.8C6.7,-68.1,7.4,-70.3,8.2,-72.5C8.9,-74.7,9.7,-76.8,10.6,-79C11.5,-81.1,12.4,-83.2,13.4,-85.3C14.4,-87.4,15.4,-89.5,16.6,-91.5C17.8,-93.5,19,-95.4,20.3,-97.3C21.6,-99.2,23.1,-101,24.6,-102.7C26.1,-104.4,27.8,-106,29.5,-107.5C31.3,-109,33.2,-110.3,35.1,-111.5C37.1,-112.7,39.2,-113.7,41.3,-114.5C43.4,-115.3,45.5,-116,47.9,-116.4C50.4,-116.9,53.2,-117.2,54.8,-117.3C56.4,-117.5,56.8,-117.4,57.3,-117.4C57.6,-117.4,57.9,-117.6,57.9,-117.9C57.9,-118.2,57.6,-118.4,57.3,-118.4C56.8,-118.4,56.4,-118.5,54.7,-118.4C53.1,-118.3,50.2,-118,47.7,-117.6C45.2,-117.1,43,-116.5,40.9,-115.7C38.7,-114.9,36.5,-113.9,34.4,-112.7C32.4,-111.5,30.4,-110.1,28.6,-108.6C26.8,-107.1,25,-105.5,23.4,-103.8C21.8,-102,20.3,-100.2,18.9,-98.3C17.5,-96.4,16.2,-94.4,15,-92.4C13.8,-90.4,12.7,-88.3,11.6,-86.2C10.6,-84.1,9.6,-81.9,8.7,-79.8C7.7,-77.6,6.9,-75.4,6.1,-73.2C5.3,-71,4.5,-68.8,3.8,-66.5C3.1,-64.3,2.4,-62.1,1.8,-59.8C1.1,-57.5,0.5,-55.3,-0,-53C-0.6,-50.7,-1.2,-48.4,-1.7,-46.2C-2.2,-43.9,-2.7,-41.6,-3.2,-39.3C-3.6,-37,-4.1,-34.7,-4.5,-32.4C-5,-30.1,-5.4,-27.8,-5.8,-25.5C-6.2,-23.2,-6.6,-20.9,-7,-18.6C-7.4,-16.3,-7.7,-14,-8.1,-11.7C-8.5,-9.3,-8.8,-7,-9.2,-4.7C-9.5,-2.4,-9.9,-0.1,-10.2,2.2C-10.5,4.5,-10.9,6.8,-11.2,9.1C-11.5,11.4,-11.9,13.7,-12.2,16.1C-12.6,18.4,-12.9,20.7,-13.2,23C-13.6,25.3,-13.9,27.6,-14.3,29.9C-14.6,32.2,-15,34.5,-15.4,36.8C-15.7,39.1,-16.1,41.4,-16.5,43.7C-16.9,46,-17.3,48.3,-17.7,50.5C-18.2,52.8,-18.6,55.1,-19.1,57.4C-19.5,59.6,-20,61.9,-20.5,64.2C-21,66.4,-21.6,68.7,-22.1,70.9C-22.7,73.1,-23.3,75.4,-24,77.6C-24.6,79.8,-25.3,82,-26.1,84.1C-26.9,86.3,-27.7,88.4,-28.6,90.5z" stroke-linecap="round" transform="matrix(1,0,0,1,467,273)" id="105" ed:tosuperid="104" fill="#ff7575"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="104" stroke-linecap="round" d="M-13.5,39.9C4.7,39.9,-11.9,-39.9,13.5,-39.9" transform="matrix(1,0,0,1,638,115)" stroke-width="2" id="107" ed:tosuperid="106" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="101" d="M-8.5,-9.4C-10,-10.4,-11.6,-10,-12.4,-8.8C-13.1,-7.7,-12.6,-6,-11.1,-5.1C-9.1,-4,-7.1,-2.9,-5.1,-1.7C-3.1,-0.5,-1.1,0.7,0.9,2C2.9,3.2,4.9,4.4,6.9,5.6C8.9,6.9,10.9,8.1,12.9,9.2C15,10.4,17,11.5,19.1,12.6C21.2,13.7,23.4,14.7,25.6,15.7C27.7,16.6,29.9,17.5,32.2,18.2C34.4,19,36.7,19.7,39,20.2C41.3,20.8,43.5,21.2,46,21.5C48.4,21.8,51.1,22,53,22.1C54.9,22.2,56.1,22.1,57.3,22.1C57.6,22.1,57.9,21.9,57.9,21.6C57.9,21.3,57.6,21.1,57.3,21.1C56.1,21.1,55,21,53.1,20.9C51.2,20.7,48.6,20.4,46.2,19.9C43.8,19.5,41.7,19,39.5,18.3C37.3,17.7,35.1,16.9,33,16C30.9,15.2,28.8,14.2,26.7,13.2C24.7,12.2,22.6,11.1,20.6,9.9C18.7,8.7,16.7,7.5,14.7,6.3C12.8,5,10.9,3.7,9,2.4C7,1.1,5.1,-0.3,3.2,-1.6C1.3,-2.9,-0.6,-4.3,-2.6,-5.6C-4.5,-6.9,-6.5,-8.2,-8.5,-9.4z" stroke-linecap="round" transform="matrix(1,0,0,1,467,412)" id="112" ed:tosuperid="111" fill="#5fb7f1"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="111" stroke-linecap="round" d="M-13.5,61.6C5.4,61.6,-13.5,-61.6,13.5,-61.6" transform="matrix(1,0,0,1,700,372)" stroke-width="2" id="116" ed:tosuperid="115" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="111" stroke-linecap="round" d="M-13.5,39.3C4.7,39.3,-11.8,-39.3,13.5,-39.3" transform="matrix(1,0,0,1,700,395)" stroke-width="2" id="118" ed:tosuperid="117" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="117" stroke-linecap="round" d="M-13.5,7.5C-1,7.5,1.3,-7.5,13.5,-7.5" transform="matrix(1,0,0,1,786,348)" stroke-width="2" id="120" ed:tosuperid="119" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="117" stroke-linecap="round" d="M-13.5,-7.5C-1,-7.5,1.3,7.5,13.5,7.5" transform="matrix(1,0,0,1,786,363)" stroke-width="2" id="122" ed:tosuperid="121" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="111" stroke-linecap="round" d="M-13.5,-20.4C1.8,-20.4,-5.2,20.4,13.5,20.4" transform="matrix(1,0,0,1,700,454)" stroke-width="2" id="124" ed:tosuperid="123" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="123" stroke-linecap="round" d="M-13.5,37.3C4.5,37.3,-11.3,-37.3,13.5,-37.3" transform="matrix(1,0,0,1,773,438)" stroke-width="2" id="126" ed:tosuperid="125" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="123" stroke-linecap="round" d="M-13.5,14.9C0.7,14.9,-2.6,-14.9,13.5,-14.9" transform="matrix(1,0,0,1,773,460)" stroke-width="2" id="128" ed:tosuperid="127" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="123" stroke-linecap="round" d="M-13.5,-22.4C2.2,-22.4,-6.1,22.4,13.5,22.4" transform="matrix(1,0,0,1,773,497)" stroke-width="2" id="130" ed:tosuperid="129" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="127" stroke-linecap="round" d="M-13.5,7.5C-1,7.5,1.3,-7.5,13.5,-7.5" transform="matrix(1,0,0,1,907,438)" stroke-width="2" id="142" ed:tosuperid="141" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="127" stroke-linecap="round" d="M-13.5,-7.5C-1,-7.5,1.3,7.5,13.5,7.5" transform="matrix(1,0,0,1,907,452)" stroke-width="2" id="144" ed:tosuperid="143" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="129" stroke-linecap="round" d="M-13.5,14.9C0.7,14.9,-2.6,-14.9,13.5,-14.9" transform="matrix(1,0,0,1,1141,505)" stroke-width="2" id="166" ed:tosuperid="165" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="129" stroke-linecap="round" d="M-13.5,0C-2.7,0,5.4,0,13.5,0" transform="matrix(1,0,0,1,1141,520)" stroke-width="2" id="168" ed:tosuperid="167" fill="none"/>
    <path stroke-linejoin="round" stroke="#5fb7f1" ed:parentid="129" stroke-linecap="round" d="M-13.5,-14.9C0.7,-14.9,-2.6,14.9,13.5,14.9" transform="matrix(1,0,0,1,1141,535)" stroke-width="2" id="170" ed:tosuperid="169" fill="none"/>
    <path stroke-linejoin="round" stroke="#ffcd55" ed:parentid="101" d="M-24.8,-106.7C-25.4,-108.4,-26.9,-109.1,-28.2,-108.6C-29.5,-108.1,-30,-106.6,-29.4,-104.9C-28.6,-102.8,-27.8,-100.6,-27,-98.5C-26.3,-96.3,-25.7,-94.1,-25,-91.9C-24.4,-89.7,-23.8,-87.4,-23.3,-85.2C-22.8,-83,-22.3,-80.7,-21.8,-78.4C-21.3,-76.2,-20.9,-73.9,-20.4,-71.6C-20,-69.3,-19.6,-67.1,-19.2,-64.8C-18.8,-62.5,-18.5,-60.2,-18.1,-57.9C-17.8,-55.6,-17.4,-53.3,-17.1,-51C-16.8,-48.7,-16.5,-46.4,-16.2,-44.1C-15.9,-41.8,-15.6,-39.4,-15.3,-37.1C-15,-34.8,-14.7,-32.5,-14.5,-30.2C-14.2,-27.9,-13.9,-25.6,-13.6,-23.2C-13.4,-20.9,-13.1,-18.6,-12.8,-16.3C-12.6,-14,-12.3,-11.7,-12,-9.3C-11.8,-7,-11.5,-4.7,-11.2,-2.4C-11,-0.1,-10.7,2.3,-10.4,4.6C-10.1,6.9,-9.9,9.2,-9.6,11.5C-9.3,13.9,-9,16.2,-8.7,18.5C-8.4,20.8,-8,23.1,-7.7,25.4C-7.4,27.8,-7.1,30.1,-6.7,32.4C-6.4,34.7,-6,37,-5.6,39.3C-5.2,41.6,-4.8,43.9,-4.4,46.2C-4,48.5,-3.6,50.8,-3.1,53.1C-2.7,55.4,-2.2,57.7,-1.7,60C-1.2,62.3,-0.7,64.6,-0.1,66.9C0.4,69.1,1,71.4,1.7,73.7C2.3,75.9,2.9,78.2,3.6,80.4C4.3,82.7,5.1,84.9,5.9,87.1C6.7,89.3,7.5,91.5,8.4,93.7C9.3,95.8,10.3,98,11.3,100.1C12.4,102.2,13.5,104.3,14.7,106.3C15.9,108.4,17.1,110.4,18.5,112.3C19.9,114.2,21.4,116,23,117.8C24.6,119.5,26.3,121.2,28.1,122.7C29.9,124.2,31.8,125.6,33.9,126.9C35.9,128.1,38.1,129.1,40.2,130C42.4,130.8,44.6,131.5,47,132C49.5,132.5,52.3,132.8,54.1,132.9C55.8,133,56.5,133,57.3,133C57.6,132.9,57.9,132.7,57.9,132.5C57.9,132.2,57.6,132,57.3,132C56.6,132,55.8,132,54.1,131.8C52.4,131.7,49.7,131.4,47.3,130.9C44.9,130.4,42.8,129.7,40.7,128.8C38.6,127.9,36.5,126.9,34.6,125.7C32.6,124.5,30.8,123.1,29,121.6C27.3,120.1,25.7,118.5,24.1,116.7C22.6,115,21.2,113.2,19.9,111.3C18.6,109.4,17.4,107.5,16.2,105.4C15.1,103.4,14,101.4,13,99.3C12,97.2,11.1,95.1,10.3,92.9C9.4,90.8,8.6,88.6,7.9,86.4C7.1,84.2,6.4,82,5.7,79.8C5.1,77.6,4.5,75.3,3.9,73.1C3.3,70.8,2.7,68.6,2.2,66.3C1.7,64,1.2,61.8,0.8,59.5C0.3,57.2,-0.1,54.9,-0.6,52.6C-1,50.4,-1.4,48.1,-1.8,45.8C-2.1,43.5,-2.5,41.2,-2.8,38.9C-3.2,36.6,-3.5,34.3,-3.8,32C-4.1,29.7,-4.4,27.3,-4.7,25C-5,22.7,-5.3,20.4,-5.6,18.1C-5.8,15.8,-6.1,13.5,-6.4,11.2C-6.6,8.8,-6.9,6.5,-7.1,4.2C-7.3,1.9,-7.6,-0.4,-7.8,-2.8C-8.1,-5.1,-8.3,-7.4,-8.5,-9.7C-8.8,-12,-9,-14.4,-9.2,-16.7C-9.5,-19,-9.7,-21.3,-9.9,-23.6C-10.2,-26,-10.4,-28.3,-10.6,-30.6C-10.9,-32.9,-11.1,-35.3,-11.4,-37.6C-11.6,-39.9,-11.9,-42.2,-12.2,-44.6C-12.4,-46.9,-12.7,-49.2,-13,-51.5C-13.3,-53.8,-13.6,-56.2,-13.9,-58.5C-14.2,-60.8,-14.6,-63.1,-14.9,-65.5C-15.3,-67.8,-15.6,-70.1,-16,-72.4C-16.4,-74.7,-16.8,-77,-17.3,-79.3C-17.7,-81.7,-18.2,-84,-18.7,-86.3C-19.3,-88.6,-19.8,-90.9,-20.4,-93.1C-21,-95.4,-21.7,-97.7,-22.4,-100C-23.1,-102.2,-23.9,-104.5,-24.8,-106.7z" stroke-linecap="round" transform="matrix(1,0,0,1,467,523)" id="178" ed:tosuperid="177" fill="#ffcd55"/>
    <path stroke-linejoin="round" stroke="#ffcd55" ed:parentid="177" stroke-linecap="round" d="M-13.5,24.9C2.7,24.9,-7.1,-24.9,13.5,-24.9" transform="matrix(1,0,0,1,654,631)" stroke-width="2" id="180" ed:tosuperid="179" fill="none"/>
    <path stroke-linejoin="round" stroke="#ffcd55" ed:parentid="177" stroke-linecap="round" d="M-13.5,10C-0.4,10,-0,-10,13.5,-10" transform="matrix(1,0,0,1,654,646)" stroke-width="2" id="182" ed:tosuperid="181" fill="none"/>
    <path stroke-linejoin="round" stroke="#ffcd55" ed:parentid="177" stroke-linecap="round" d="M-13.5,-4.9C-1.5,-4.9,2.7,4.9,13.5,4.9" transform="matrix(1,0,0,1,654,661)" stroke-width="2" id="184" ed:tosuperid="183" fill="none"/>
    <path stroke-linejoin="round" stroke="#ffcd55" ed:parentid="177" stroke-linecap="round" d="M-13.5,-19.8C1.7,-19.8,-4.9,19.8,13.5,19.8" transform="matrix(1,0,0,1,654,676)" stroke-width="2" id="186" ed:tosuperid="185" fill="none"/>
    <path stroke-linejoin="round" stroke="#f1a3dc" ed:parentid="101" d="M-26.9,-158.2C-27.5,-159.9,-29,-160.6,-30.3,-160.1C-31.6,-159.7,-32.2,-158.2,-31.6,-156.5C-30.9,-154.3,-30.1,-152.2,-29.5,-150C-28.8,-147.8,-28.2,-145.6,-27.6,-143.3C-27.1,-141.1,-26.6,-138.9,-26.1,-136.6C-25.6,-134.4,-25.1,-132.1,-24.7,-129.8C-24.3,-127.5,-23.9,-125.3,-23.5,-123C-23.2,-120.7,-22.8,-118.4,-22.5,-116.1C-22.2,-113.8,-21.9,-111.5,-21.6,-109.2C-21.3,-106.9,-21,-104.6,-20.8,-102.3C-20.5,-100,-20.3,-97.6,-20,-95.3C-19.8,-93,-19.6,-90.7,-19.4,-88.4C-19.2,-86.1,-19,-83.7,-18.8,-81.4C-18.6,-79.1,-18.4,-76.8,-18.2,-74.5C-18,-72.1,-17.9,-69.8,-17.7,-67.5C-17.6,-65.2,-17.4,-62.8,-17.2,-60.5C-17.1,-58.2,-16.9,-55.9,-16.8,-53.5C-16.7,-51.2,-16.5,-48.9,-16.4,-46.5C-16.2,-44.2,-16.1,-41.9,-16,-39.6C-15.8,-37.2,-15.7,-34.9,-15.6,-32.6C-15.4,-30.2,-15.3,-27.9,-15.2,-25.6C-15.1,-23.3,-14.9,-20.9,-14.8,-18.6C-14.7,-16.3,-14.5,-13.9,-14.4,-11.6C-14.3,-9.3,-14.1,-6.9,-14,-4.6C-13.9,-2.3,-13.7,0,-13.6,2.4C-13.5,4.7,-13.3,7,-13.2,9.4C-13,11.7,-12.9,14,-12.7,16.4C-12.6,18.7,-12.4,21,-12.2,23.3C-12.1,25.7,-11.9,28,-11.7,30.3C-11.6,32.7,-11.4,35,-11.2,37.3C-11,39.7,-10.8,42,-10.6,44.3C-10.4,46.6,-10.2,49,-10,51.3C-9.7,53.6,-9.5,55.9,-9.3,58.3C-9,60.6,-8.8,62.9,-8.5,65.2C-8.3,67.6,-8,69.9,-7.7,72.2C-7.4,74.5,-7.1,76.8,-6.8,79.2C-6.5,81.5,-6.1,83.8,-5.8,86.1C-5.5,88.4,-5.1,90.7,-4.7,93C-4.3,95.3,-3.9,97.7,-3.5,100C-3.1,102.3,-2.6,104.6,-2.2,106.8C-1.7,109.1,-1.2,111.4,-0.7,113.7C-0.1,116,0.4,118.3,1,120.5C1.6,122.8,2.2,125.1,2.8,127.3C3.5,129.6,4.2,131.8,4.9,134C5.7,136.3,6.4,138.5,7.3,140.7C8.1,142.9,9,145,9.9,147.2C10.9,149.3,11.9,151.5,13,153.6C14,155.7,15.2,157.7,16.4,159.7C17.7,161.7,19,163.7,20.4,165.5C21.8,167.4,23.4,169.2,25,170.9C26.6,172.6,28.4,174.3,30.2,175.7C32.1,177.2,34.1,178.5,36.1,179.7C38.2,180.8,40.4,181.8,42.6,182.5C44.8,183.3,47.1,183.9,49.5,184.3C51.9,184.6,54.6,184.8,57.3,184.9C57.6,184.9,57.9,184.7,57.9,184.4C57.9,184.1,57.6,183.9,57.3,183.9C54.7,183.7,52.1,183.6,49.7,183.2C47.3,182.8,45.1,182.2,43,181.5C40.9,180.7,38.8,179.7,36.8,178.6C34.7,177.4,32.8,176.1,31.1,174.7C29.3,173.3,27.6,171.7,26,170C24.4,168.3,23,166.5,21.6,164.7C20.2,162.8,18.9,160.9,17.7,158.9C16.6,156.9,15.4,154.9,14.4,152.8C13.4,150.8,12.4,148.7,11.5,146.5C10.6,144.4,9.7,142.2,8.9,140.1C8.1,137.9,7.4,135.7,6.7,133.5C6,131.3,5.3,129,4.7,126.8C4.1,124.6,3.5,122.3,2.9,120.1C2.4,117.8,1.8,115.5,1.3,113.3C0.8,111,0.4,108.7,-0.1,106.4C-0.5,104.1,-0.9,101.9,-1.3,99.6C-1.7,97.3,-2.1,95,-2.4,92.7C-2.8,90.4,-3.1,88.1,-3.5,85.8C-3.8,83.5,-4.1,81.2,-4.4,78.8C-4.7,76.5,-4.9,74.2,-5.2,71.9C-5.5,69.6,-5.7,67.3,-5.9,65C-6.2,62.6,-6.4,60.3,-6.6,58C-6.8,55.7,-7,53.4,-7.2,51C-7.4,48.7,-7.6,46.4,-7.8,44.1C-8,41.8,-8.1,39.4,-8.3,37.1C-8.5,34.8,-8.6,32.5,-8.8,30.1C-8.9,27.8,-9.1,25.5,-9.2,23.2C-9.3,20.8,-9.5,18.5,-9.6,16.2C-9.7,13.8,-9.9,11.5,-10,9.2C-10.1,6.9,-10.2,4.5,-10.3,2.2C-10.4,-0.1,-10.6,-2.5,-10.7,-4.8C-10.8,-7.1,-10.9,-9.5,-11,-11.8C-11.1,-14.1,-11.2,-16.4,-11.3,-18.8C-11.4,-21.1,-11.5,-23.4,-11.6,-25.8C-11.7,-28.1,-11.8,-30.4,-11.9,-32.8C-12,-35.1,-12.1,-37.4,-12.3,-39.8C-12.4,-42.1,-12.5,-44.4,-12.6,-46.8C-12.7,-49.1,-12.8,-51.4,-12.9,-53.7C-13.1,-56.1,-13.2,-58.4,-13.3,-60.7C-13.4,-63.1,-13.6,-65.4,-13.7,-67.7C-13.8,-70.1,-14,-72.4,-14.1,-74.7C-14.3,-77.1,-14.4,-79.4,-14.6,-81.7C-14.8,-84.1,-15,-86.4,-15.1,-88.7C-15.3,-91.1,-15.5,-93.4,-15.7,-95.7C-15.9,-98.1,-16.2,-100.4,-16.4,-102.7C-16.6,-105.1,-16.9,-107.4,-17.1,-109.7C-17.4,-112,-17.7,-114.4,-18,-116.7C-18.3,-119,-18.6,-121.4,-19,-123.7C-19.3,-126,-19.7,-128.3,-20.1,-130.6C-20.5,-133,-20.9,-135.3,-21.4,-137.6C-21.9,-139.9,-22.4,-142.2,-22.9,-144.5C-23.5,-146.8,-24.1,-149.1,-24.8,-151.4C-25.4,-153.7,-26.2,-155.9,-26.9,-158.2z" stroke-linecap="round" transform="matrix(1,0,0,1,467,575)" id="194" ed:tosuperid="193" fill="#f1a3dc"/>
    <path stroke-linejoin="round" stroke="#6cc9e5" ed:parentid="101" d="M19,-22.3C20.1,-23.7,19.9,-25.4,18.9,-26.2C17.8,-27.1,16.1,-26.9,15,-25.4C13.6,-23.5,12.2,-21.6,10.9,-19.6C9.5,-17.7,8.2,-15.7,7,-13.7C5.7,-11.7,4.5,-9.7,3.3,-7.7C2.1,-5.7,0.9,-3.7,-0.3,-1.7C-1.4,0.3,-2.6,2.3,-3.8,4.3C-5,6.3,-6.2,8.3,-7.5,10.3C-8.7,12.2,-10,14.2,-11.3,16.1C-12.6,18,-13.9,19.9,-15.3,21.7C-16.7,23.5,-18.2,25.3,-19.7,27C-21.2,28.8,-22.8,30.4,-24.5,32C-26.2,33.5,-27.9,35,-29.8,36.3C-31.6,37.7,-33.5,38.9,-35.6,40C-37.6,41.1,-39.7,42,-41.8,42.8C-43.9,43.5,-46,44.1,-48.5,44.6C-51,45,-53.8,45.3,-55.4,45.4C-56.9,45.5,-57.1,45.5,-57.3,45.5C-57.6,45.4,-57.9,45.7,-57.9,46C-57.9,46.3,-57.6,46.4,-57.3,46.5C-57.1,46.5,-56.9,46.5,-55.3,46.5C-53.7,46.4,-50.8,46.2,-48.3,45.9C-45.7,45.5,-43.5,45,-41.3,44.3C-39.1,43.6,-36.9,42.7,-34.7,41.7C-32.6,40.6,-30.5,39.4,-28.5,38.1C-26.6,36.8,-24.7,35.3,-22.9,33.7C-21.1,32.2,-19.4,30.5,-17.7,28.8C-16.1,27.1,-14.5,25.3,-13,23.5C-11.5,21.7,-10.1,19.8,-8.7,17.9C-7.3,16,-5.9,14.1,-4.6,12.2C-3.3,10.2,-2,8.3,-0.7,6.3C0.6,4.3,1.8,2.4,3.1,0.4C4.4,-1.6,5.6,-3.5,6.9,-5.5C8.2,-7.4,9.4,-9.3,10.7,-11.3C12,-13.2,13.4,-15.1,14.7,-16.9C16.1,-18.7,17.5,-20.5,19,-22.3z" stroke-linecap="round" transform="matrix(1,0,0,1,352,437)" id="196" ed:tosuperid="195" fill="#6cc9e5"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="104" stroke-linecap="round" d="M-13.5,-4.9C-1.5,-4.9,2.7,4.9,13.5,4.9" transform="matrix(1,0,0,1,638,160)" stroke-width="2" id="222" ed:tosuperid="221" fill="none"/>
    <path stroke-linejoin="round" stroke="#80cf70" ed:parentid="101" d="M8.5,-1.7C10.2,-2.3,10.9,-3.8,10.4,-5.1C9.9,-6.4,8.4,-7,6.7,-6.4C4.5,-5.4,2.4,-4.5,0.2,-3.6C-2,-2.7,-4.1,-1.7,-6.2,-0.8C-8.4,0.1,-10.5,1.1,-12.6,2C-14.8,2.9,-16.9,3.8,-19.1,4.6C-21.2,5.5,-23.4,6.3,-25.6,7.1C-27.7,7.9,-29.9,8.6,-32.1,9.2C-34.4,9.9,-36.6,10.5,-38.8,11C-41.1,11.5,-43.3,12,-45.7,12.3C-48,12.7,-50.6,13,-52.6,13.1C-54.5,13.3,-55.9,13.4,-57.3,13.4C-57.6,13.4,-57.9,13.6,-57.9,13.9C-57.9,14.2,-57.6,14.4,-57.3,14.4C-55.9,14.4,-54.5,14.5,-52.5,14.4C-50.5,14.4,-47.9,14.2,-45.4,14C-43,13.8,-40.7,13.5,-38.4,13.1C-36.1,12.7,-33.8,12.2,-31.5,11.7C-29.2,11.1,-26.9,10.5,-24.7,9.9C-22.4,9.2,-20.1,8.5,-17.9,7.8C-15.7,7,-13.5,6.3,-11.3,5.5C-9.1,4.7,-6.9,3.9,-4.7,3.1C-2.5,2.2,-0.3,1.4,1.9,0.6C4.1,-0.1,6.3,-0.9,8.5,-1.7z" stroke-linecap="round" transform="matrix(1,0,0,1,352,405)" id="253" ed:tosuperid="252" fill="#80cf70"/>
    <path stroke-linejoin="round" stroke="#fa8556" ed:parentid="101" d="M9.2,10.8C10.7,11.8,12.3,11.5,13.1,10.4C13.9,9.2,13.5,7.6,12,6.6C10.1,5.4,8.2,4.1,6.2,2.8C4.3,1.5,2.4,0.2,0.5,-1.2C-1.4,-2.5,-3.3,-3.9,-5.2,-5.2C-7.1,-6.6,-9,-7.9,-11,-9.2C-13,-10.5,-14.9,-11.8,-17,-13C-19,-14.2,-21.1,-15.4,-23.2,-16.5C-25.3,-17.6,-27.4,-18.6,-29.6,-19.5C-31.8,-20.4,-34,-21.3,-36.3,-22C-38.5,-22.6,-40.8,-23.2,-43.2,-23.7C-45.5,-24.1,-47.8,-24.4,-50.2,-24.6C-52.5,-24.8,-54.9,-24.8,-57.3,-24.8C-57.6,-24.8,-57.9,-24.6,-57.9,-24.3C-57.9,-24,-57.6,-23.8,-57.3,-23.8C-54.9,-23.7,-52.6,-23.5,-50.3,-23.2C-48,-23,-45.8,-22.5,-43.5,-22C-41.3,-21.4,-39.1,-20.8,-36.9,-20C-34.8,-19.2,-32.7,-18.3,-30.6,-17.3C-28.5,-16.3,-26.5,-15.2,-24.5,-14C-22.5,-12.9,-20.6,-11.6,-18.7,-10.3C-16.8,-9.1,-14.9,-7.7,-13,-6.3C-11.2,-4.9,-9.4,-3.5,-7.5,-2.1C-5.7,-0.7,-3.9,0.8,-2,2.2C-0.2,3.7,1.7,5.1,3.5,6.6C5.4,8,7.3,9.4,9.2,10.8z" stroke-linecap="round" transform="matrix(1,0,0,1,352,366)" id="317" ed:tosuperid="316" fill="#fa8556"/>
    <path stroke-linejoin="round" stroke="#fa8556" ed:parentid="316" stroke-linecap="round" d="M13.5,10C0.4,10,0,-10,-13.5,-10" transform="matrix(1,0,0,1,214,332)" stroke-width="2" id="319" ed:tosuperid="318" fill="none"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="104" stroke-linecap="round" d="M-13.5,-49.7C5.3,-49.7,-13.4,49.7,13.5,49.7" transform="matrix(1,0,0,1,638,205)" stroke-width="2" id="324" ed:tosuperid="323" fill="none"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="221" stroke-linecap="round" d="M-13.5,15.3C0.8,15.3,-2.7,-15.3,13.5,-15.3" transform="matrix(1,0,0,1,778,149)" stroke-width="2" id="326" ed:tosuperid="325" fill="none"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="269" stroke-linecap="round" d="M-13.5,7.1C-1,7.1,1.5,-7.1,13.5,-7.1" transform="matrix(1,0,0,1,931,202)" stroke-width="2" id="328" ed:tosuperid="327" fill="none"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="325" stroke-linecap="round" d="M-13.5,14.5C0.6,14.5,-2.4,-14.5,13.5,-14.5" transform="matrix(1,0,0,1,880,120)" stroke-width="2" id="264" ed:tosuperid="263" fill="none"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="325" stroke-linecap="round" d="M-13.5,-0.4C-2.7,-0.4,5.4,0.4,13.5,0.4" transform="matrix(1,0,0,1,880,135)" stroke-width="2" id="266" ed:tosuperid="265" fill="none"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="325" stroke-linecap="round" d="M-13.5,-15.3C0.8,-15.3,-2.7,15.3,13.5,15.3" transform="matrix(1,0,0,1,880,149)" stroke-width="2" id="268" ed:tosuperid="267" fill="none"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="221" stroke-linecap="round" d="M-13.5,-22C2.1,-22,-5.9,22,13.5,22" transform="matrix(1,0,0,1,778,187)" stroke-width="2" id="270" ed:tosuperid="269" fill="none"/>
    <path stroke-linejoin="round" stroke="#ff7575" ed:parentid="269" stroke-linecap="round" d="M-13.5,-7.9C-0.9,-7.9,1.1,7.9,13.5,7.9" transform="matrix(1,0,0,1,931,217)" stroke-width="2" id="272" ed:tosuperid="271" fill="none"/>
    <path stroke-linejoin="round" stroke="#fa8556" ed:parentid="316" stroke-linecap="round" d="M13.5,-4.9C1.5,-4.9,-2.7,4.9,-13.5,4.9" transform="matrix(1,0,0,1,214,347)" stroke-width="2" id="208" ed:tosuperid="207" fill="none"/>
    <g ed:topictype="mainidea" ed:layout="map" transform="matrix(1,0,0,1,358,363)" ed:width="103.072" ed:height="54.6" id="101">
        <path stroke-linejoin="round" stroke="#ffffff" d="M27.3,0L75.8,0C90.8,0,103.1,12.2,103.1,27.3C103.1,42.4,90.8,54.6,75.8,54.6L27.3,54.6C12.2,54.6,0,42.4,0,27.3C0,12.2,12.2,0,27.3,0z" stroke-width="4" fill="#ffffff"/>
        <text class="st15">
            <tspan y="32.7" x="24" style="white-space:pre">Netty</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="104" transform="matrix(1,0,0,1,651,22)" ed:width="79.8" ed:height="23.35" id="102">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,23.4L79.8,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">零拷贝</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>与操作系统的零拷贝不太一样，使用堆外内存&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(54,3)" xlink:href="#note"/>
        </g>
    </g>
    <symbol id="note">
        <image height="16" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADtUlEQVRYCcVXS0gWURQ+d+Z/qJWPiEot0ohQc6GbHkSZFb0spHbRTmjVQlyEWuuokIiIVkVERLUrSMpa9A4fYFSLJIyyh1omqOXrH/+Z6Zzj3GGc/8HM309e+OfcOXPO+b577r3nv1dAkmaaZj5+Lkhi4uXTgBBi0Ish2yCoir8m/PXjL12NYlFM1U1EOBWWwSNz6sf2mTdnQf/ZCebUkNPEd19kLgV12QYIVjSCyFz+GAPswozoMpCbQBOCn55+sB/MyKi0SYsU4VzI2NtKJJqRwBkZ1E2gX2tvKIj23QO1oApC60+RA9tO3lojfTzJrMMf2Q4HBFrXSdAHnkGg6ACENp2nNVEogyiyg+nnBUdpp+YElzapSBoAxaJmxS6wsFhnE8A3Xu1yzuXI2QofShbx89bcthxLzXCuJ3tnOQkkjU6jcAeO50A2csRgaGAMdwOYBoSrrwEEsmJcAjGaBAolfytk1L5I8DWOOjoBkad1oP/qhsDKPRDafAHC267GGHrOQIxnMoUDnMyi39pAe1UP6pJK6ZUpO+knoI3A9MODPHJlQSGEt1wCEcq2SYDJJeAiLsSFRCK9BHDkk607wfj9CUFzILzjJqgrduP8X3eTqEDs2+klYKUdImMUF0xtDPSv97mvLC6fQ2Lm3TnS12AWStOTAcecU9pDlc0ghAIalvNoz2UmQTuCdgM3JTgrAQzPu0B6xEgXOKVdIAkRzgOts4lJGBP9oPfdBXNmHKthLQTL6ynMHayIH/6NQAJwiq4WH4IQykhHI0R7b5CKwUMbWwCE0oWvR0iX+hQkAafA1MSiIhBqmPtK9mqwwOm9AUc/RZ3UCHgAN4ZfcyEy9WlQqYjta8P/gg7CpBaZFakQMKN2heN9bs25DEjSBrfmPFx1hcEjz486zbjvOwPG4MvZIoM1Xy44Z1Q3uEw7g+v2wG0X/wRG37OzuqqGV7sdCTuJwNkmDjjp/RMY6eF4Sm4JS/lICi6N4kjf29CQBPLKZsPhPOtD7aC1H7f3uUx7HLwYlT8C0Ukwx79wEO1tC5hjvWCMf7eDUpHxA06OvgiYfz4D1m8G1PufsBSBDFBy1uIZshoC645RkWG914cvAgKBgiV1uHICoOSWgZJXisWm2Deok5yTwAB9oHM8nQvpNOs+FwL+iQQrTzj9PfUpFjWKbTXGor6dLyyNdH0aoEsENTpKS0dWpPiQx3Jyt2LPuaq57wXzfjGhu9t/vZrFJBZX+fxdTt1skAzfltx6n+9z5tzt+xdJwGKygJ8cdgAAAABJRU5ErkJggg==" width="16"/>
    </symbol>
    <g ed:layout="rightmap" ed:parentid="101" transform="matrix(1,0,0,1,524,121)" ed:width="100" ed:height="33.55" id="104">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,33.5L100,33.5" stroke-width="2" fill="none"/>
        <text class="st17">
            <tspan y="22.3" x="17" style="white-space:pre">内存管理</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="104" transform="matrix(1,0,0,1,651,52)" ed:width="66.2" ed:height="23.35" id="106">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,23.4L66.2,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">规格</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>tiny：0~512B，间隔为16B&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>small：512B~8KB，间隔为512B&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>page/subpage：8K&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>chunk：16M&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(40,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="101" transform="matrix(1,0,0,1,524,403)" ed:width="162.6" ed:height="31.15" id="111">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,31.1L162.6,31.1" stroke-width="2" fill="none"/>
        <text class="st17">
            <tspan y="19.9" x="17" style="white-space:pre">NioEventLoop</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>如果调用Channel操作的线程是&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; background-color:#ffff00;&quot;>当前线程，那么直接执行&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>；否则会将操作封装成任务放入NioEventLoop的任务队列中。&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(130,7)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="111" transform="matrix(1,0,0,1,714,287)" ed:width="126.8" ed:height="23.35" id="115">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L126.8,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">多生产者单消费者</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="111" transform="matrix(1,0,0,1,714,332)" ed:width="58.8" ed:height="23.35" id="117">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L58.8,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">选择器</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="117" transform="matrix(1,0,0,1,800,317)" ed:width="126.8" ed:height="23.35" id="119">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L126.8,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">普通：按顺序分配</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="117" transform="matrix(1,0,0,1,800,347)" ed:width="249.2" ed:height="23.35" id="121">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L249.2,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">优化：加1 &amp;（NioEventLoop个数-1）</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="111" transform="matrix(1,0,0,1,714,451)" ed:width="45.2" ed:height="23.35" id="123">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L45.2,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">运行</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="123" transform="matrix(1,0,0,1,786,377)" ed:width="148.6" ed:height="23.35" id="125">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L148.6,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">监测是否有IO事件</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>判断轮询过程是否有任务加入，是的话终止本次轮询&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>不需要的话，进行一次定时轮询任务&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>解决JDK空轮询bug：当检测到多次空轮询时，会创建一个新的Selector。&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(123,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="123" transform="matrix(1,0,0,1,786,422)" ed:width="107.8" ed:height="23.35" id="127">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L107.8,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">处理IO事件</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>取出IO事件对应的channel。&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>处理channel，如果用户移除了一定数量的Channel之后，会丢掉原有的key，重新select()一批出来&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(82,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="123" transform="matrix(1,0,0,1,786,496)" ed:width="341.2" ed:height="23.35" id="129">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L341.2,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">处理异步任务队列，taskQueue，外部线程提交的任务</tspan>
        </text>
    </g>
    <g ed:topictype="floating" ed:layout="rightmap" transform="matrix(1,0,0,1,984,580)" ed:width="413.4" ed:height="36" id="131">
        <path stroke-linejoin="round" stroke="#a98ae7" d="M0,0L413.4,0L413.4,36L0,36L0,0z" fill="#a98ae7"/>
        <text class="st18">
            <tspan y="23.4" x="18" style="white-space:pre">判断定时任务的执行时间是否快到了，是的话终止本次轮询</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="127" transform="matrix(1,0,0,1,921,407)" ed:width="158.8" ed:height="23.35" id="141">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L158.8,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">未优化的SelectedKeys</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="127" transform="matrix(1,0,0,1,921,437)" ed:width="179.8" ed:height="23.35" id="143">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L179.8,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">优化后的SelectedKeys</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>使用自定义Set（实质是数组）替换Selector内部的SelectedKeys和publicSelectedKeys（两个HashSet）&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(154,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="129" transform="matrix(1,0,0,1,1154,466)" ed:width="120.6" ed:height="23.35" id="165">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L120.6,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">两个异步队列</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>定时任务队列和普通任务队列。&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(95,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="129" transform="matrix(1,0,0,1,1154,496)" ed:width="194.8" ed:height="23.35" id="167">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L194.8,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">合并定时任务到普通任务队列</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="129" transform="matrix(1,0,0,1,1154,526)" ed:width="318" ed:height="23.35" id="169">
        <path stroke-linejoin="round" stroke="#5fb7f1" d="M0,23.4L318,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">处理任务：每执行64个任务就会检查一下是否超时</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="101" transform="matrix(1,0,0,1,524,622)" ed:width="116" ed:height="33.55" id="177">
        <path stroke-linejoin="round" stroke="#ffcd55" d="M0,33.5L116,33.5" stroke-width="2" fill="none"/>
        <text class="st17">
            <tspan y="22.3" x="17" style="white-space:pre">新连接接入</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="177" transform="matrix(1,0,0,1,667,582)" ed:width="107" ed:height="23.35" id="179">
        <path stroke-linejoin="round" stroke="#ffcd55" d="M0,23.4L107,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">检测新连接</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>maxMessagePerRead控制了每次调用read()方法接收的新连接数量；如果超过，会停止接收新连接，一般设置为16.&lt;/span>&lt;/p>&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;  font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>&lt;br />&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>还可以进行收尾工作，可通过可通过SingleThreadEventLoop中的executeAfterEventLoopIterator（Runnable task)添加收尾任务&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(81,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="177" transform="matrix(1,0,0,1,667,612)" ed:width="160.4" ed:height="23.35" id="181">
        <path stroke-linejoin="round" stroke="#ffcd55" d="M0,23.4L160.4,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">创建NioSocketChannel</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="177" transform="matrix(1,0,0,1,667,642)" ed:width="191.8" ed:height="23.35" id="183">
        <path stroke-linejoin="round" stroke="#ffcd55" d="M0,23.4L191.8,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">分配线程并注册Selector</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>由服务器启动时注册的ServerBootstrapAcceptor处理，创建相应的worker channel，并注册到Selector中去。&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(166,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="177" transform="matrix(1,0,0,1,667,672)" ed:width="157.2" ed:height="23.35" id="185">
        <path stroke-linejoin="round" stroke="#ffcd55" d="M0,23.4L157.2,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">向Selector注册读事件</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="101" transform="matrix(1,0,0,1,524,728)" ed:width="168" ed:height="31.15" id="193">
        <path stroke-linejoin="round" stroke="#f1a3dc" d="M0,31.1L168,31.1" stroke-width="2" fill="none"/>
        <text class="st17">
            <tspan y="19.9" x="17" style="white-space:pre">FastThreadLocal</tspan>
        </text>
    </g>
    <g ed:layout="leftmap" ed:parentid="101" transform="matrix(1,0,0,1,168,452)" ed:width="127.4" ed:height="31.15" id="195">
        <path stroke-linejoin="round" stroke="#6cc9e5" d="M0,31.1L127.4,31.1" stroke-width="2" fill="none"/>
        <text class="st17">
            <tspan y="19.9" x="17" style="white-space:pre">Pipeline</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>1. 可通过@Sharable共享handler。&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>2. 可通过@Skip跳过某些方法，ChannelInboundHandlerAdapter的每个方法都加了@Skip，也就是说只有用户重写的方法才是关心的。&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>3. 可动态插拔handler。&lt;/span>&lt;/p>&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;  font-family:'Arial';&quot;>&lt;br />&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>inbound事件和onbound事件的区别：&lt;/span>&lt;/p>&lt;ul style=&quot;margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;&quot;>&lt;li style=&quot; font-family:'Arial';&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>inbound事件主要发生在数据被接收或Channel状态变化时，&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545; background-color:#ffff00;&quot;>被动接收&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>。&lt;/span>&lt;/li>&lt;li style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>outbound事件主要发生在数据发送或用户对Channel进行操作时，是&lt;span style=&quot; background-color:#ffff00;&quot;>主动发起&lt;/span>的。&lt;/li>&lt;/ul>&lt;/body>">
            <use transform="translate(95,7)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="104" transform="matrix(1,0,0,1,651,141)" ed:width="113.2" ed:height="23.35" id="221">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,23.4L113.2,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">内存分配管理器</tspan>
        </text>
    </g>
    <g ed:layout="leftmap" ed:parentid="101" transform="matrix(1,0,0,1,120,385)" ed:width="175.4" ed:height="33.55" id="252">
        <path stroke-linejoin="round" stroke="#80cf70" d="M0,33.5L175.4,33.5" stroke-width="2" fill="none"/>
        <text class="st17">
            <tspan y="22.3" x="17" style="white-space:pre">对象池Recycler</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>1. Stack作为本线程对象池的核心&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>2. 在回收线程1的对象时，线程1会放到Stack中；其他线程会放到WeakOrderQueue，并通过链表形式与线程1的Stack相连。&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>3. WeakOrderQueue以Link管理对象，每个Link可存放16个对象。&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>4. 默认情况下一个线程最多持有2CPU个WeakOrderQueue。也就是说一个线程最多可以帮2CPU个外部线程回收对象。&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>5. 当前线程从对象池拿对象时，先从Stack中拿，然后从别的线程的WeakOrderQueue中转移对象到Stack中。如果存在，则从Stack获取对象；如果没有回收到就创建对象。&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>6. 一个对象池中最多存放4K个对象。&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(143,9)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="leftmap" ed:parentid="101" transform="matrix(1,0,0,1,227,309)" ed:width="68" ed:height="33.55" id="316">
        <path stroke-linejoin="round" stroke="#fa8556" d="M0,33.5L68,33.5" stroke-width="2" fill="none"/>
        <text class="st17">
            <tspan y="22.3" x="17" style="white-space:pre">问题</tspan>
        </text>
    </g>
    <g ed:layout="leftmap" ed:parentid="316" transform="matrix(1,0,0,1,22,299)" ed:width="178.2" ed:height="23.35" id="318">
        <path stroke-linejoin="round" stroke="#fa8556" d="M0,23.4L178.2,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">需要多个Acceptor线程</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>在个别特殊场景中，一个NIO线程负责监听和处理所有的客户端连接可能会存在性能问题，例如&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; background-color:#ffff00;&quot;>并发百万客户端连接、或者服务端需要对客户端握手进行安全认证&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>。但是认证本身非常损耗性能，在这类场景下，单独一个Acceptor线程可能会存在性能不足的问题，为了解决性能问题，即主从React多线程模型（多个Acceptor线程）。&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(152,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="104" transform="matrix(1,0,0,1,651,231)" ed:width="120.6" ed:height="23.35" id="323">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,23.4L120.6,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">申请内存流程</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>初次申请内存时，Netty会从一整块内存（Chunk）中分出一部分给用户使用。这部分工作是由Arena完成的。当用户使用完释放完毕内存，分出来的内存会&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; background-color:#ffff00;&quot;>按照不同规格大小放在PoolThreadCache中缓存起来&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>。当下次要申请内存的时候，优先从PoolThreadCache中找。&lt;/span>&lt;/p>&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;  font-family:'Consolas'; font-size:11pt;&quot;>&lt;br />&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>具体申请过程如下：&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>1. 对请求内存做规整化处理&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>2. 当请求内存小于8K时，走subpage逻辑，先从PoolThreadCache中找，再从Subpage池中找，最后向Arena申请分配&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>3. 当请求内存大于8k小于16M时，走Chunk逻辑，先从PoolThreadCache中找，再向Arena申请分配&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#454545;&quot;>4. 如果请求内存大于16M时，不走内存池，直接分配&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(95,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="221" transform="matrix(1,0,0,1,791,112)" ed:width="75" ed:height="21.75" id="325">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,21.8L75,21.8" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="14.7" x="8" style="white-space:pre">Arena</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>是线程共有的。&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>通过伙伴算法管理Chunk，以平衡二叉树的形式管理page。&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(49,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="269" transform="matrix(1,0,0,1,944,171)" ed:width="93.40000000000001" ed:height="23.35" id="327">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,23.4L93.4,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">缓存内存</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>Arena 中分配的内存使用完毕以后，不会立刻归还，而是会在 PoolThreadCache 中缓存起来。当用户下一次申请的时候，会先在 PoolThreadCache 中寻找有没有匹配的内存。&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>PoolThreadCache 是线程私有的，内部通过 MemoryRegionCache 的方式缓存内存。MemoryRegionCache 的内部实际上是一个队列。和 Arena 中的 Subpage 池一样，PoolThreadCache 也把内存按不同的规格保存&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;img src=&quot;data:image/png;base64,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&quot; width=&quot;288&quot; height=&quot;155&quot; />&lt;/p>&lt;/body>">
            <use transform="translate(68,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="325" transform="matrix(1,0,0,1,893,82)" ed:width="95" ed:height="23.35" id="263">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,23.4L95,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">page分配</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>对于page的分配：&lt;/span>&lt;/p>&lt;ul style=&quot;margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;&quot;>&lt;li style=&quot; font-family:'Arial';&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>当我们要申请大小为 16K 的内存时，我们会从根节点开始不断寻找可用的节点，一直到第 10 层。那么如何判断一个节点是否可用呢？Netty 会在每个节点内部保存一个值，这个值代表这个节点之下的第几层还存在未分配的节点。比如第 9 层的节点的值如果为 9，就代表这个节点本身到下面所有的子节点都未分配；如果第 9 层的节点的值为 10，代表它本身不可被分配，但第 10 层有子节点可以被分配；如果第 9 层的节点的值为 12，此时可分配节点的深度大于了总深度，代表这个节点及其下面的所有子节点都不可被分配。&lt;/span>&lt;/li>&lt;/ul>&lt;/body>">
            <use transform="translate(69,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="325" transform="matrix(1,0,0,1,893,112)" ed:width="116.6" ed:height="23.35" id="265">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,23.4L116.6,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">subpage分配</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; color:#ff0000;&quot;>对于subpage的分配：&lt;/span>&lt;/p>&lt;ul style=&quot;margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;&quot;>&lt;li style=&quot; font-family:'Arial';&quot; style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>首先会从arena中取出一个Subpage池的头节点，然后从Chunk中找到一个可分配的Page，Netty会先检查Page是否已被转化成Subpage，如果没有的话，会先创建Subpage，然后再从Subpage分配内存。创建好的Subpage被分成多个element，我们只会用到其中的一段，剩下都是未分配的。而这些还有element未分配的Subpage会被放入到Arena的Subpage池中。Arena中按不同内存规格大小分成了两组Subpage池，&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt; background-color:#ffff00;&quot;>分别是tinySubpagePools和smallSubpagePools。&lt;/span>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>还未被完全分配的Subpage会被放入Subpage池中，这样下次用户申请相同规格的内存时就可以直接从Subpage池中找到Subpage进行分配。被分配完的 Subpage会被移除。&lt;/span>&lt;/li>&lt;/ul>&lt;/body>">
            <use transform="translate(91,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="325" transform="matrix(1,0,0,1,893,141)" ed:width="102.2" ed:height="23.35" id="267">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,23.4L102.2,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">chunk管理</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>随着 Chunk 中内存的不断分配和释放（内存释放后会先进入 Cache，如果 Cache 满了会归还给 Chunk），会导致很多碎片内存段，大大增加了之后分配一段连续内存的失败率，针对这种情况，Netty 按内存使用率把 Chunk 分成了几个等级，分配时按一定的次序进行分配，减少内存的碎片化。&lt;/span>&lt;/p>&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;  font-family:'Consolas'; font-size:11pt;&quot;>&lt;br />&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>而当我们申请内存时，会以 q050-&amp;gt;q025-&amp;gt;q000-&amp;gt;qInit-&amp;gt;q075 的次序申请&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(76,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="rightmap" ed:parentid="221" transform="matrix(1,0,0,1,791,187)" ed:width="126" ed:height="21.75" id="269">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,21.8L126,21.8" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="14.7" x="8" style="white-space:pre">PoolThreadCache</tspan>
        </text>
    </g>
    <g ed:layout="rightmap" ed:parentid="269" transform="matrix(1,0,0,1,944,201)" ed:width="93.40000000000001" ed:height="23.35" id="271">
        <path stroke-linejoin="round" stroke="#ff7575" d="M0,23.4L93.4,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">释放内存</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>内存池不会预置内存块到线程缓存中，在线程申请到内存使用完成之后归还内存时优先把内存块缓存到线程中，除非该内存块不适合缓存在线程中（内存太大），假如当前线程内存分配动作非常活跃时，这样会明显的提高分配效率，但是当它不活跃时对内存又是极大的浪费，所以内存池会监控该线程，随时做好把内存从线程缓存中删除的准备。删除缓存的逻辑在 trim() 方法中，这个方法在 allocate() 中被调用，默认每进行 8192 次 allocate() 会调用一次 trim()&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(68,3)" xlink:href="#note"/>
        </g>
    </g>
    <g ed:layout="leftmap" ed:parentid="316" transform="matrix(1,0,0,1,30,329)" ed:width="170.2" ed:height="23.35" id="207">
        <path stroke-linejoin="round" stroke="#fa8556" d="M0,23.4L170.2,23.4" stroke-width="2" fill="none"/>
        <text class="st16">
            <tspan y="16.3" x="8" style="white-space:pre">Netty中的线程池大小</tspan>
        </text>
        <g ed:note="&lt;body style=&quot; font-family:'SimSun'; font-size:9pt; font-weight:400; font-style:normal;&quot;>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>其实是根据公式得到的：（io等待时间/CPU时间 + 1）* Ncpu&lt;/span>&lt;/p>&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; &quot;>&lt;span style=&quot; font-family:'Consolas'; font-size:11pt;&quot;>Netty默认ioRatio=50，即io等待时间 = CPU时间，所以等于2Ncpu&lt;/span>&lt;/p>&lt;/body>">
            <use transform="translate(144,3)" xlink:href="#note"/>
        </g>
    </g>
    <symbol id="plus">
        <path d="M11,6C11,8.8,8.8,11,6,11C3.2,11,1,8.8,1,6C1,3.2,3.2,1,6,1C8.8,1,11,3.2,11,6z" fill="url(#lg5)"/>
        <path stroke="#46a000" d="M11,6C11,8.8,8.8,11,6,11C3.2,11,1,8.8,1,6C1,3.2,3.2,1,6,1C8.8,1,11,3.2,11,6zM3,6L9,6M6,3L6,9" stroke-width="0.7" fill="none"/>
    </symbol>
    <symbol id="minus">
        <path d="M11,6C11,8.8,8.8,11,6,11C3.2,11,1,8.8,1,6C1,3.2,3.2,1,6,1C8.8,1,11,3.2,11,6z" fill="url(#lg5)"/>
        <path stroke="#46a000" d="M11,6C11,8.8,8.8,11,6,11C3.2,11,1,8.8,1,6C1,3.2,3.2,1,6,1C8.8,1,11,3.2,11,6zM3,6L9,6" stroke-width="0.7" fill="none"/>
    </symbol>
    <g ed:togtopicid="101" transform="translate(462,385)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="104" transform="translate(625,132)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="111" transform="translate(688,412)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="117" transform="translate(774,338)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="123" transform="translate(760,457)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="127" transform="translate(895,427)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="129" transform="translate(1128,502)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="177" transform="translate(641,633)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="221" transform="translate(765,147)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="316" transform="translate(214,319)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="325" transform="translate(867,117)">
        <use xlink:href="#minus"/>
    </g>
    <g ed:togtopicid="269" transform="translate(918,192)">
        <use xlink:href="#minus"/>
    </g>
</svg>
</div>
        <div id="copyright">Created With  <a href="https://www.edrawsoft.com/" target="_blank" title="edrawsoft">MindMaster</a></div>
      </div>
    </div>
    <script>eval(atob('dmFyIG11YT13aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDsNCnZhciB1YT0obXVhLmluZGV4T2YoJ3J2OjExJykrbXVhLmluZGV4T2YoJ01TSUUnKSk+PTA7DQpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ZnLWNvbnRhaW5lcicpLm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KfQ0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N2Zy1jb250YWluZXInKS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uIChldmVudCkgew0KICAgIGlmKGV2ZW50LndoaWNoID09Myl7DQogICAgICAgIHRoaXMuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOw0KICAgICAgICB0aGlzLm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24gKGV2KSB7DQogICAgICAgICAgICB0aGlzLnNjcm9sbEJ5KC0oZXYubW92ZW1lbnRYKSwgMCk7DQogICAgICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwtKGV2Lm1vdmVtZW50WSkpDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5vbm1vdXNldXAgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9ICBudWxsOw0KICAgICAgICAgICAgdGhpcy5vbm1vdXNldXAgPSBudWxsOw0KICAgICAgICAgICAgdGhpcy5vbm1vdXNlbW92ZSA9IG51bGw7DQogICAgICAgIH0NCiAgICB9DQp9DQpOdW1iZXIucHJvdG90eXBlLnRvc3VpdHN2Zz1mdW5jdGlvbiAoKSB7DQogICAgdmFyIG51bT10aGlzLnZhbHVlT2YoKTsNCiAgICBpZihudW0lMT09PTApew0KICAgICAgICByZXR1cm4gbnVtKzAuNQ0KICAgIH1lbHNlIHJldHVybiBudW07DQp9Ow0KTnVtYmVyLnByb3RvdHlwZS5wbHVzej1mdW5jdGlvbigpIHsNCiAgICB2YXIgbnVtPXRoaXMudmFsdWVPZigpOw0KICAgIHJldHVybiBudW08MTA/JzAnK251bTpudW07DQp9Ow0KZnVuY3Rpb24gcGFyc2VEYXRlKG51bSkgew0KICAgIHZhciBkYXRlID0gbmV3IERhdGUobnVtKTsNCiAgICB2YXIgWSA9IGRhdGUuZ2V0RnVsbFllYXIoKSArICctJzsNCiAgICB2YXIgTSA9IChkYXRlLmdldE1vbnRoKCkrMSkucGx1c3ooKSArICctJzsNCiAgICB2YXIgRCA9IGRhdGUuZ2V0RGF0ZSgpLnBsdXN6KCkgKyAnICc7DQogICAgdmFyIGggPSBkYXRlLmdldEhvdXJzKCkucGx1c3ooKSArICc6JzsNCiAgICB2YXIgbW0gPSBkYXRlLmdldE1pbnV0ZXMoKS5wbHVzeigpICsgJzonOw0KICAgIHZhciBzID0gZGF0ZS5nZXRTZWNvbmRzKCkucGx1c3ooKTsNCiAgICByZXR1cm4gWStNK0QraCttbStzOw0KfQ0KLy8tLXByZWRlZmluZWQNCi8vY29tbWVudC0tDQp2YXIgY29tbWVudHM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZz5nW2VkXFw6Y29tbWVudF0nKTsNCmZ1bmN0aW9uIGdldGN3aChwb3B1cCkgew0KICAgIGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3N2ZycpWzBdLmFwcGVuZENoaWxkKHBvcHVwKTsNCiAgICB2YXIgdz1wb3B1cC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDsNCiAgICB2YXIgaD1wb3B1cC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7DQogICAgcmV0dXJuIFt3LGhdDQp9DQpmb3IodmFyIGk9MDtpPGNvbW1lbnRzLmxlbmd0aDtpKyspew0KICAgIHZhciBwb3B1cD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywnZycpOw0KICAgIHZhciBwb3B1cFI9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdyZWN0Jyk7DQogICAgdmFyIGhvdmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdyZWN0Jyk7DQogICAgdmFyIG9saW5lPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdyZWN0Jyk7DQogICAgaG92ZXIuc2V0QXR0cmlidXRlKCdmaWxsJywnI2NkY2RmZicpOw0KICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgneCcsJzAnKTsNCiAgICBob3Zlci5zZXRBdHRyaWJ1dGUoJ3knLCcwJyk7DQogICAgaG92ZXIuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCcxNicpOw0KICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCcxNicpOw0KICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5JywnMC42Jyk7DQogICAgaG92ZXIuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLGNvbW1lbnRzW2ldLnF1ZXJ5U2VsZWN0b3IoJ3VzZScpLmdldEF0dHJpYnV0ZSgndHJhbnNmb3JtJykpOw0KICAgIGhvdmVyLnN0eWxlLmRpc3BsYXk9J25vbmUnOw0KICAgIGNvbW1lbnRzW2ldLmFwcGVuZENoaWxkKGhvdmVyKTsNCiAgICB2YXIgYT1KU09OLnBhcnNlKGNvbW1lbnRzW2ldLmdldEF0dHJpYnV0ZSgnZWQ6Y29tbWVudCcpKTsNCiAgICB2YXIgaGVpZ2h0PTA7DQogICAgdmFyIGNhcnI9W107DQogICAgZm9yKHZhciBqPTA7ajxhLmxlbmd0aDtqKyspew0KICAgICAgICB2YXIgc3RhbXA9TnVtYmVyKGFbal0uRGF0ZSkqMTAwMDsNCiAgICAgICAgdmFyIHRpbWU9cGFyc2VEYXRlKHN0YW1wKTsNCiAgICAgICAgdmFyIG5hbWU9YVtqXS5OYW1lOw0KICAgICAgICB2YXIgbWVzc2FnZT1hW2pdLk1lc3NhZ2U7DQogICAgICAgIHZhciBtZXNzYWdlQXJyPW1lc3NhZ2Uuc3BsaXQoL1xuLyk7DQogICAgICAgIHZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdnJyk7DQogICAgICAgIHZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCd0ZXh0Jyk7DQogICAgICAgIHZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCd0ZXh0Jyk7DQogICAgICAgIHZhciBtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCd0ZXh0Jyk7DQogICAgICAgIG4uc2V0QXR0cmlidXRlKCd4Jyw1KTsNCiAgICAgICAgbi5zZXRBdHRyaWJ1dGUoJ3knLDEyKTsNCiAgICAgICAgbi5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCcjMDA2ZWZmJyk7DQogICAgICAgIG4udGV4dENvbnRlbnQ9bmFtZSsnOiAnOw0KICAgICAgICBuLnNldEF0dHJpYnV0ZSgnZm9udC1zaXplJywnMTInKTsNCiAgICAgICAgdC5zZXRBdHRyaWJ1dGUoJ3gnLDIwMCk7DQogICAgICAgIHQuc2V0QXR0cmlidXRlKCd5JywxMik7DQogICAgICAgIHQuc2V0QXR0cmlidXRlKCdmaWxsJywnIzk2OTY5NicpOw0KICAgICAgICB0LnRleHRDb250ZW50PXRpbWU7DQogICAgICAgIHQuc2V0QXR0cmlidXRlKCdmb250LXNpemUnLCcxMCcpOw0KICAgICAgICBtLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywndHJhbnNsYXRlKDIwLDI3KScpOw0KICAgICAgICBtLnNldEF0dHJpYnV0ZSgnZm9udC1zaXplJywnMTInKTsNCiAgICAgICAgZm9yKHZhciBrPTA7azxtZXNzYWdlQXJyLmxlbmd0aDtrKyspew0KICAgICAgICAgICAgdmFyIHRzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCd0c3BhbicpOw0KICAgICAgICAgICAgdHMuc2V0QXR0cmlidXRlKCd4JywnMCcpOw0KICAgICAgICAgICAgdHMuc2V0QXR0cmlidXRlKCd5JyxrKjE2KTsNCiAgICAgICAgICAgIHRzLnRleHRDb250ZW50PW1lc3NhZ2VBcnJba107DQogICAgICAgICAgICBtLmFwcGVuZENoaWxkKHRzKTsNCiAgICAgICAgfQ0KICAgICAgICBvLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywndHJhbnNsYXRlKDAsJytoZWlnaHQrJyknKTsNCiAgICAgICAgby5hcHBlbmRDaGlsZChuKTsNCiAgICAgICAgby5hcHBlbmRDaGlsZCh0KTsNCiAgICAgICAgby5hcHBlbmRDaGlsZChtKTsNCiAgICAgICAgY2Fyci5wdXNoKG8pOw0KICAgICAgICBwb3B1cC5hcHBlbmRDaGlsZChvKTsNCiAgICAgICAgaGVpZ2h0PShtZXNzYWdlQXJyLmxlbmd0aCsxKSoxNitoZWlnaHQ7DQogICAgfQ0KICAgIHZhciB3YXJyPWdldGN3aChwb3B1cCk7DQogICAgb2xpbmUuc2V0QXR0cmlidXRlKCd4JywnMCcpOw0KICAgIG9saW5lLnNldEF0dHJpYnV0ZSgneScsJzAnKTsNCiAgICB2YXIgb3c9d2FyclswXSsxMC41Ow0KICAgIHZhciBvaD13YXJyWzFdKzM7DQogICAgb2xpbmUuc2V0QXR0cmlidXRlKCd3aWR0aCcsb3cpOw0KICAgIG9saW5lLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JyxvaCk7DQogICAgb2xpbmUuc2V0QXR0cmlidXRlKCdmaWxsJywnd2hpdGUnKTsNCiAgICBvbGluZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsJyM2NTY1NjUnKTsNCiAgICBwb3B1cC5hcHBlbmRDaGlsZChvbGluZSk7DQogICAgdmFyIGw9Y2Fyci5sZW5ndGg7DQogICAgd2hpbGUobC0tKXsNCiAgICAgICAgcG9wdXAuYXBwZW5kQ2hpbGQoY2FycltsXSk7DQogICAgfQ0KICAgIHBvcHVwLm9ubW91c2VvdmVyPWZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5PSdibG9jayc7DQogICAgfTsNCiAgICBwb3B1cC5vbm1vdXNlb3V0PWZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIH07DQogICAgdmFyIGNzPWNvbW1lbnRzW2ldLnF1ZXJ5U2VsZWN0b3IoJ3VzZScpLmdldEF0dHJpYnV0ZSgndHJhbnNmb3JtJykubWF0Y2goL1woKFxTKnxcUypcc1xTKilcKS8pWzFdLnNwbGl0KC8gfCwvKTsNCiAgICB2YXIgcHM9Y29tbWVudHNbaV0ucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScpOw0KICAgIGlmKHBzLnN1YnN0cigwLDIpID09ICd0cicpew0KICAgICAgICB2YXIgcHBzID0gcHMubWF0Y2goL1woKFxTKnxcUypcc1xTKilcKS8pWzFdLnNwbGl0KC8gfCwvKTsNCiAgICAgICAgdmFyIHg9cGFyc2VGbG9hdChjc1swXSkrcGFyc2VGbG9hdChwcHNbMF0pOw0KICAgICAgICB2YXIgeT1wYXJzZUZsb2F0KHBwc1sxXSk7DQogICAgICAgIHg9eC50b3N1aXRzdmcoKTsNCiAgICAgICAgeT15LnRvc3VpdHN2ZygpOw0KICAgICAgICB2YXIgdHJzdHIgPSAndHJhbnNsYXRlKCcreCsnLCcreSsnKSc7DQogICAgfQ0KICAgIGVsc2UgaWYocHMuc3Vic3RyKDAsMikgPT0gJ21hJyl7DQogICAgICAgIHZhciBwcHMgPSBwcy5tYXRjaCgvKFwtP1xkKyhcLlxkKyk/KVtcLCBdKFwtP1xkKyhcLlxkKyk/KVtcLCBdKFwtP1xkKyhcLlxkKyk/KVtcLCBdKFwtP1xkKyhcLlxkKyk/KVtcLCBdKFwtP1xkKyhcLlxkKyk/KVtcLCBdKFwtP1xkKyhcLlxkKyk/KVwpJC8pOw0KICAgICAgICB2YXIgbWFBcnIgPSBbcGFyc2VGbG9hdChwcHNbMV0pLHBhcnNlRmxvYXQocHBzWzNdKSxwYXJzZUZsb2F0KHBwc1s1XSkscGFyc2VGbG9hdChwcHNbN10pLHBhcnNlRmxvYXQocHBzWzldKSxwYXJzZUZsb2F0KHBwc1sxMV0pXTsNCiAgICAgICAgaWYobWFBcnJbMV0gPT0gMCl7DQogICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQoY3NbMF0pOw0KICAgICAgICAgICAgdmFyIHk9IHBhcnNlRmxvYXQoY3NbMV0pKzE2Ow0KICAgICAgICAgICAgdmFyIHgxID0geCAqIG1hQXJyWzBdICsgeSAqIG1hQXJyWzJdICsgbWFBcnJbNF07DQogICAgICAgICAgICB2YXIgeTEgPSB4ICogbWFBcnJbMV0gKyB5ICogbWFBcnJbM10gKyBtYUFycls1XTsNCiAgICAgICAgICAgIHgxPXgxLnRvc3VpdHN2ZygpOw0KICAgICAgICAgICAgeTE9eTEudG9zdWl0c3ZnKCk7DQogICAgICAgICAgICB2YXIgdHJzdHIgPSAgJ3RyYW5zbGF0ZSgnK3gxKycsJyt5MSsnKSc7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KGNzWzBdKSsxNjsNCiAgICAgICAgICAgIHZhciB5ID0gcGFyc2VGbG9hdChjc1sxXSkrMTY7DQogICAgICAgICAgICB2YXIgeDEgPSB4ICogbWFBcnJbMF0gKyB5ICogbWFBcnJbMl0gKyBtYUFycls0XTsNCiAgICAgICAgICAgIHZhciB5MSA9IHggKiBtYUFyclsxXSArIHkgKiBtYUFyclszXSArIG1hQXJyWzVdOw0KICAgICAgICAgICAgeCA9IHBhcnNlRmxvYXQoY3NbMF0pKzE2Ow0KICAgICAgICAgICAgeSA9IHBhcnNlRmxvYXQoY3NbMV0pOw0KICAgICAgICAgICAgdmFyIHgyID0geCAqIG1hQXJyWzBdICsgeSAqIG1hQXJyWzJdICsgbWFBcnJbNF07DQogICAgICAgICAgICB2YXIgeTIgPSB4ICogbWFBcnJbMV0gKyB5ICogbWFBcnJbM10gKyBtYUFycls1XTsNCiAgICAgICAgICAgIHZhciBmeCA9IHgxPHgyP3gxLnRvc3VpdHN2ZygpOiB4Mi50b3N1aXRzdmcoKTsNCiAgICAgICAgICAgIHZhciBmeSA9IHkxPnkyP3kxLnRvc3VpdHN2ZygpOiB5Mi50b3N1aXRzdmcoKTsNCiAgICAgICAgICAgIHZhciBvZmZ5ID0gTWF0aC5hYnMoeTEteTIpOw0KICAgICAgICAgICAgdmFyIHRyc3RyID0gICd0cmFuc2xhdGUoJytmeCsnLCcrZnkrJyknOw0KICAgICAgICAgICAgcG9wdXBSLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JyxvZmZ5LnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgcG9wdXBSLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCcxNicpOw0KICAgICAgICAgICAgcG9wdXBSLnNldEF0dHJpYnV0ZSgneScsKC1vZmZ5KS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIHBvcHVwUi5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCd0cmFuc3BhcmVudCcpOw0KICAgICAgICAgICAgcG9wdXAuYXBwZW5kQ2hpbGQocG9wdXBSKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBwb3B1cC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsdHJzdHIpOw0KICAgIHBvcHVwLnNldEF0dHJpYnV0ZSgnY29tbWVudCcsJycpOw0KICAgIHBvcHVwLnN0eWxlLmRpc3BsYXk9J25vbmUnOw0KICAgIHBvcHVwLnNldEF0dHJpYnV0ZSgnZWQ6Y29tbWVudGlkJyxjb21tZW50c1tpXS5wYXJlbnROb2RlLmlkKTsNCiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3ZnLWNvbnRhaW5lciA+IHN2ZycpLmFwcGVuZENoaWxkKHBvcHVwKTsNCiAgICBjb21tZW50c1tpXS5vbm1vdXNlb3Zlcj1mdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBjb21tZW50aWQ9dGhpcy5wYXJlbnROb2RlLmlkOw0KICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3JlY3QnKS5zdHlsZS5kaXNwbGF5PSdibG9jayc7DQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImdbZWRcXDpjb21tZW50aWQ9JyIrY29tbWVudGlkKyInXVtjb21tZW50XSIpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsNCiAgICB9Ow0KICAgIGNvbW1lbnRzW2ldLm9ubW91c2VvdXQ9ZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgY29tbWVudGlkPXRoaXMucGFyZW50Tm9kZS5pZDsNCi8vICAgICAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7DQogICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcigncmVjdCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnOw0KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJnW2VkXFw6Y29tbWVudGlkPSciK2NvbW1lbnRpZCsiJ11bY29tbWVudF0iKS5zdHlsZS5kaXNwbGF5PSdub25lJzsNCiAgICB9DQp9DQovLy0tY29tbWVudA0KLy9ub3RlLS0NCmlmKCF1YSl7DQogICAgdmFyIG5vdGVzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2c+Z1tlZFxcOm5vdGVdJyk7DQogICAgZnVuY3Rpb24gZ2V0d2gocyxwKSB7DQogICAgICAgIHZhciBtYWlucD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgbWFpbnAuc3R5bGUuY3NzVGV4dD1zOw0KICAgICAgICBtYWlucC5zdHlsZS5kaXNwbGF5PSdpbmxpbmUtYmxvY2snOw0KCQltYWlucC5zdHlsZS5tYXhXaWR0aCA9ICc0MDBweCc7DQoJCW1haW5wLnN0eWxlLndvcmRCcmVhayA9ICdicmVhay1hbGwnOw0KICAgICAgICBtYWlucC5pbm5lckhUTUw9cDsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtYWlucCk7DQogICAgICAgIHZhciB3PW1haW5wLmNsaWVudFdpZHRoOw0KICAgICAgICB2YXIgaD1tYWlucC5jbGllbnRIZWlnaHQ7DQogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobWFpbnApOw0KICAgICAgICByZXR1cm4gW3csaF0NCiAgICB9DQogICAgZm9yKHZhciBpPTA7aTxub3Rlcy5sZW5ndGg7aSsrKXsNCiAgICAgICAgdmFyIGE9bm90ZXNbaV0uZ2V0QXR0cmlidXRlKCdlZDpub3RlJyk7DQoJCXZhciBub3RlTG9jayA9IG5vdGVzW2ldLmdldEF0dHJpYnV0ZSgnZWQ6bm90ZWxvY2snKTsNCiAgICAgICAgaWYobm90ZUxvY2sgPT0gJ3RydWUnKXsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIHZhciBtYWlucD1hLm1hdGNoKC88Ym9keVtePl0qPiguKik8XC9ib2R5Pi8pWzFdOw0KICAgICAgICB2YXIgbWFpbnM9YS5tYXRjaCgvc3R5bGU9IiguKj8pIi8pWzFdOw0KICAgICAgICB2YXIgb3V0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdnJyk7DQogICAgICAgIHZhciBvbGluZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywncmVjdCcpOw0KICAgICAgICB2YXIgcG9wdXA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsJ2ZvcmVpZ25PYmplY3QnKTsNCiAgICAgICAgdmFyIHBvcHVwUj0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsJ3JlY3QnKTsNCiAgICAgICAgdmFyIGhvdmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdyZWN0Jyk7DQogICAgICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgnZmlsbCcsJyNjZGNkZmYnKTsNCiAgICAgICAgaG92ZXIuc2V0QXR0cmlidXRlKCd4JywnMCcpOw0KICAgICAgICBob3Zlci5zZXRBdHRyaWJ1dGUoJ3knLCcwJyk7DQogICAgICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywnMTYnKTsNCiAgICAgICAgaG92ZXIuc2V0QXR0cmlidXRlKCd3aWR0aCcsJzE2Jyk7DQogICAgICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5JywnMC42Jyk7DQogICAgICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJyxub3Rlc1tpXS5xdWVyeVNlbGVjdG9yKCd1c2UnKS5nZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScpKTsNCiAgICAgICAgaG92ZXIuc3R5bGUuZGlzcGxheT0nbm9uZSc7DQogICAgICAgIG5vdGVzW2ldLmFwcGVuZENoaWxkKGhvdmVyKTsNCiAgICAgICAgcG9wdXAuc3R5bGUuY3NzVGV4dD1tYWluczsNCiAgICAgICAgcG9wdXAuaW5uZXJIVE1MPW1haW5wOw0KICAgICAgICB2YXIgd2g9Z2V0d2gobWFpbnMsbWFpbnApOw0KICAgICAgICBwb3B1cC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJyx3aFswXSk7DQogICAgICAgIHBvcHVwLnNldEF0dHJpYnV0ZSgnaGVpZ2h0Jyx3aFsxXSk7DQogICAgICAgIHBvcHVwLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywndHJhbnNsYXRlKDgsNCknKTsNCgkJcG9wdXAuc3R5bGUud29yZEJyZWFrID0gJ2JyZWFrLWFsbCc7DQogICAgICAgIHBvcHVwLnN0eWxlLnRleHRBbGlnbj0nbGVmdCc7DQogICAgICAgIG9saW5lLnNldEF0dHJpYnV0ZSgneCcsJzAnKTsNCiAgICAgICAgb2xpbmUuc2V0QXR0cmlidXRlKCd5JywnMCcpOw0KICAgICAgICBvbGluZS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJyx3aFswXSsxNik7DQogICAgICAgIG9saW5lLnNldEF0dHJpYnV0ZSgnaGVpZ2h0Jyx3aFsxXSs4KTsNCiAgICAgICAgb2xpbmUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCcjYTI3YTAwJyk7DQogICAgICAgIG9saW5lLnNldEF0dHJpYnV0ZSgnZmlsbCcsJyNmZmU3OWQnKTsNCiAgICAgICAgb3V0LmFwcGVuZENoaWxkKG9saW5lKTsNCiAgICAgICAgb3V0LmFwcGVuZENoaWxkKHBvcHVwKTsNCiAgICAgICAgb3V0LnNldEF0dHJpYnV0ZSgnbm90ZScsJycpOw0KICAgICAgICBvdXQuc3R5bGUuZGlzcGxheT0nbm9uZSc7DQogICAgICAgIG91dC5zZXRBdHRyaWJ1dGUoJ2VkOm5vdGVpZCcsbm90ZXNbaV0ucGFyZW50Tm9kZS5pZCk7DQogICAgICAgIG91dC5vbm1vdXNlb3Zlcj1mdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsNCiAgICAgICAgfTsNCiAgICAgICAgb3V0Lm9ubW91c2VvdXQ9ZnVuY3Rpb24gKCkgew0KLy8gICAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24gPyB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlUmFuZ2Uod2luZG93LmdldFNlbGVjdGlvbigpLnJlKTpkb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKTsNCg0KICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5PSdub25lJzsNCiAgICAgICAgfTsNCiAgICAgICAgdmFyIGNzPW5vdGVzW2ldLnF1ZXJ5U2VsZWN0b3IoJ3VzZScpLmdldEF0dHJpYnV0ZSgndHJhbnNmb3JtJykubWF0Y2goL1woKFxTKnxcUypcc1xTKilcKS8pWzFdLnNwbGl0KC8gfCwvKTsNCiAgICAgICAgdmFyIHBzPW5vdGVzW2ldLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nKTsNCiAgICAgICAgaWYocHMuc3Vic3RyKDAsMikgPT0gJ3RyJyl7DQogICAgICAgICAgICB2YXIgcHBzID0gcHMubWF0Y2goL1woKFxTKnxcUypcc1xTKilcKS8pWzFdLnNwbGl0KC8gfCwvKTsNCiAgICAgICAgICAgIHZhciB4PXBhcnNlRmxvYXQoY3NbMF0pK3BhcnNlRmxvYXQocHBzWzBdKTsNCiAgICAgICAgICAgIHZhciB5PXBhcnNlRmxvYXQocHBzWzFdKTsNCiAgICAgICAgICAgIHg9eC50b3N1aXRzdmcoKTsNCiAgICAgICAgICAgIHk9eS50b3N1aXRzdmcoKTsNCiAgICAgICAgICAgIHZhciB0cnN0ciA9ICd0cmFuc2xhdGUoJyt4KycsJyt5KycpJzsNCiAgICAgICAgfWVsc2UgaWYocHMuc3Vic3RyKDAsMikgPT0gJ21hJyl7DQogICAgICAgICAgICB2YXIgcHBzID0gcHMubWF0Y2goLyhcLT9cZCsoXC5cZCspPylbXCwgXShcLT9cZCsoXC5cZCspPylbXCwgXShcLT9cZCsoXC5cZCspPylbXCwgXShcLT9cZCsoXC5cZCspPylbXCwgXShcLT9cZCsoXC5cZCspPylbXCwgXShcLT9cZCsoXC5cZCspPylcKSQvKTsNCiAgICAgICAgICAgIHZhciBtYUFyciA9IFtwYXJzZUZsb2F0KHBwc1sxXSkscGFyc2VGbG9hdChwcHNbM10pLHBhcnNlRmxvYXQocHBzWzVdKSxwYXJzZUZsb2F0KHBwc1s3XSkscGFyc2VGbG9hdChwcHNbOV0pLHBhcnNlRmxvYXQocHBzWzExXSldOw0KICAgICAgICAgICAgaWYobWFBcnJbMV0gPT0gMCl7DQogICAgICAgICAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KGNzWzBdKTsNCiAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlRmxvYXQoY3NbMV0pKzE2Ow0KICAgICAgICAgICAgICAgIHZhciB4MSA9IHggKiBtYUFyclswXSArIHkgKiBtYUFyclsyXSArIG1hQXJyWzRdOw0KICAgICAgICAgICAgICAgIHZhciB5MSA9IHggKiBtYUFyclsxXSArIHkgKiBtYUFyclszXSArIG1hQXJyWzVdOw0KICAgICAgICAgICAgICAgIHgxPXgxLnRvc3VpdHN2ZygpOw0KICAgICAgICAgICAgICAgIHkxPXkxLnRvc3VpdHN2ZygpOw0KICAgICAgICAgICAgICAgIHZhciB0cnN0ciA9ICAndHJhbnNsYXRlKCcreDErJywnK3kxKycpJzsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChjc1swXSkrMTY7DQogICAgICAgICAgICAgICAgdmFyIHkgPSBwYXJzZUZsb2F0KGNzWzFdKSsxNjsNCiAgICAgICAgICAgICAgICB2YXIgeDEgPSB4ICogbWFBcnJbMF0gKyB5ICogbWFBcnJbMl0gKyBtYUFycls0XTsNCiAgICAgICAgICAgICAgICB2YXIgeTEgPSB4ICogbWFBcnJbMV0gKyB5ICogbWFBcnJbM10gKyBtYUFycls1XTsNCiAgICAgICAgICAgICAgICB4ID0gcGFyc2VGbG9hdChjc1swXSkrMTY7DQogICAgICAgICAgICAgICAgeSA9IHBhcnNlRmxvYXQoY3NbMV0pOw0KICAgICAgICAgICAgICAgIHZhciB4MiA9IHggKiBtYUFyclswXSArIHkgKiBtYUFyclsyXSArIG1hQXJyWzRdOw0KICAgICAgICAgICAgICAgIHZhciB5MiA9IHggKiBtYUFyclsxXSArIHkgKiBtYUFyclszXSArIG1hQXJyWzVdOw0KICAgICAgICAgICAgICAgIHZhciBmeCA9IHgxPHgyP3gxLnRvc3VpdHN2ZygpOiB4Mi50b3N1aXRzdmcoKTsNCiAgICAgICAgICAgICAgICB2YXIgZnkgPSB5MT55Mj95MS50b3N1aXRzdmcoKTogeTIudG9zdWl0c3ZnKCk7DQoJCQkJdmFyIG9mZnkgPSBNYXRoLmFicyh5MS15Mik7CQkJCQkJCQkJCSAgDQogICAgICAgICAgICAgICAgdmFyIHRyc3RyID0gICd0cmFuc2xhdGUoJytmeCsnLCcrZnkrJyknOw0KICAgICAgICAgICAgICAgIHBvcHVwUi5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsb2ZmeS50b1N0cmluZygpKTsNCiAgICAgICAgICAgICAgICBwb3B1cFIuc2V0QXR0cmlidXRlKCd3aWR0aCcsJzE2Jyk7DQogICAgICAgICAgICAgICAgcG9wdXBSLnNldEF0dHJpYnV0ZSgneScsKC1vZmZ5KS50b1N0cmluZygpKTsNCiAgICAgICAgICAgICAgICBwb3B1cFIuc2V0QXR0cmlidXRlKCdmaWxsJywndHJhbnNwYXJlbnQnKTsNCiAgICAgICAgICAgICAgICBwb3B1cC5hcHBlbmRDaGlsZChwb3B1cFIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIG91dC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsdHJzdHIpOw0KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3ZnLWNvbnRhaW5lciA+IHN2ZycpLmFwcGVuZENoaWxkKG91dCk7DQogICAgICAgIG5vdGVzW2ldLm9ubW91c2VvdmVyPWZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBub3RlaWQ9dGhpcy5wYXJlbnROb2RlLmlkOw0KICAgICAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKCdyZWN0Jykuc3R5bGUuZGlzcGxheT0nYmxvY2snOw0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZ1tlZFxcOm5vdGVpZD0nIitub3RlaWQrIiddW25vdGVdIikuc3R5bGUuZGlzcGxheT0nYmxvY2snOw0KICAgICAgICB9Ow0KICAgICAgICBub3Rlc1tpXS5vbm1vdXNlb3V0PWZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBub3RlaWQ9dGhpcy5wYXJlbnROb2RlLmlkOw0KLy8gICAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcigncmVjdCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnOw0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZ1tlZFxcOm5vdGVpZD0nIitub3RlaWQrIiddW25vdGVdIikuc3R5bGUuZGlzcGxheT0nbm9uZSc7DQogICAgICAgIH0NCiAgICB9DQp9ZWxzZXsNCiAgICBjb25zb2xlLmxvZygn5oqx5q2J77yMSUXmtY/op4jlmajkuI3mlK/mjIFub3Rl6Kej5p6Q77yM6K+35L2/55So5YW25LuW5YaF5qC45rWP6KeI5Zmo44CC6LCi6LCi77yBJykNCn0NCi8vLS1ub3RlDQovL2h5cGVybGluay0tDQp2YXIgbGlua3M9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZz5nW2VkXFw6aHlwZXJsaW5rXScpOw0KZnVuY3Rpb24gZ2V0bWF4bGVuKGFycixicnIpIHsNCiAgICB2YXIgbD0wOw0KICAgIHZhciBsbD0wOw0KICAgIGZvcih2YXIgaj0wO2o8YXJyLmxlbmd0aDtqKyspew0KICAgICAgICB2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywndGV4dCcpOw0KICAgICAgICBpZighaXNOYU4obGlua2FycltqXSkpew0KICAgICAgICAgICAgZS50ZXh0Q29udGVudD0nUGFnZS0nK2FycltqXTsNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgICBlLnRleHRDb250ZW50PWFycltqXTsNCiAgICAgICAgfQ0KICAgICAgICBlLnN0eWxlLmZvbnRTaXplPScxMnB4JzsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3ZnJylbMF0uYXBwZW5kQ2hpbGQoZSk7DQogICAgICAgIHZhciBldz1lLmdldEJCb3goKS53aWR0aDsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3ZnJylbMF0ucmVtb3ZlQ2hpbGQoZSk7DQogICAgICAgIHZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCd0ZXh0Jyk7DQogICAgICAgIGgudGV4dENvbnRlbnQ9YnJyW2pdOw0KICAgICAgICBoLnN0eWxlLmZvbnRTaXplPScxMnB4JzsNCiAgICAgICAgaC5zdHlsZS5mb250V2VpZ2h0PSdib2xkJzsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3ZnJylbMF0uYXBwZW5kQ2hpbGQoaCk7DQogICAgICAgIHZhciBodz1oLmdldEJCb3goKS53aWR0aDsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3ZnJylbMF0ucmVtb3ZlQ2hpbGQoaCk7DQogICAgICAgIGw9ZXc+aHc/ZXc6aHc7DQogICAgICAgIGxsPWw+bGw/bDpsbDsNCiAgICB9DQogICAgcmV0dXJuIGxsOw0KfQ0KZm9yKHZhciBpPTA7aTxsaW5rcy5sZW5ndGg7aSsrKXsNCiAgICB2YXIgcG9wdXA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsJ2cnKTsNCiAgICB2YXIgcG9wdXBSPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywncmVjdCcpOw0KICAgIHZhciBob3Zlcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywncmVjdCcpOw0KICAgIHZhciBkZXNjYXJyPVtdOw0KICAgIHZhciBsaW5rYXJyPVtdOw0KICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgnZmlsbCcsJyNjZGNkZmYnKTsNCiAgICBob3Zlci5zZXRBdHRyaWJ1dGUoJ3gnLCcwJyk7DQogICAgaG92ZXIuc2V0QXR0cmlidXRlKCd5JywnMCcpOw0KICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywnMTYnKTsNCiAgICBob3Zlci5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywnMTYnKTsNCiAgICBob3Zlci5zZXRBdHRyaWJ1dGUoJ2ZpbGwtb3BhY2l0eScsJzAuNicpOw0KICAgIGhvdmVyLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJyxsaW5rc1tpXS5xdWVyeVNlbGVjdG9yKCd1c2UnKS5nZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScpKTsNCiAgICBob3Zlci5zdHlsZS5kaXNwbGF5PSdub25lJzsNCiAgICBsaW5rc1tpXS5hcHBlbmRDaGlsZChob3Zlcik7DQogICAgLy8gY29uc29sZS5sb2cobGlua3NbaV0uZ2V0QXR0cmlidXRlKCdlZDpoeXBlcmxpbmsnKSk7DQogICAgdmFyIGE9SlNPTi5wYXJzZShsaW5rc1tpXS5nZXRBdHRyaWJ1dGUoJ2VkOmh5cGVybGluaycpKTsNCiAgICB2YXIgY3M9bGlua3NbaV0ucXVlcnlTZWxlY3RvcigndXNlJykuZ2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nKS5tYXRjaCgvXCgoXFMqfFxTKlxzXFMqKVwpLylbMV0uc3BsaXQoLyB8LC8pOw0KICAgIHZhciBwcz1saW5rc1tpXS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgndHJhbnNmb3JtJyk7DQogICAgaWYocHMuc3Vic3RyKDAsMikgPT0gJ3RyJyl7DQogICAgICAgIHZhciBwcHMgPSBwcy5tYXRjaCgvXCgoXFMqfFxTKlxzXFMqKVwpLylbMV0uc3BsaXQoLyB8LC8pOw0KICAgICAgICB2YXIgeD1wYXJzZUZsb2F0KGNzWzBdKStwYXJzZUZsb2F0KHBwc1swXSk7DQogICAgICAgIHZhciB5PXBhcnNlRmxvYXQocHBzWzFdKTsNCiAgICAgICAgeD14LnRvc3VpdHN2ZygpOw0KICAgICAgICB5PXkudG9zdWl0c3ZnKCk7DQogICAgICAgIHZhciB0cnN0ciA9ICd0cmFuc2xhdGUoJyt4KycsJyt5KycpJzsNCiAgICB9ZWxzZSBpZihwcy5zdWJzdHIoMCwyKSA9PSAnbWEnKXsNCiAgICAgICAgdmFyIHBwcyA9IHBzLm1hdGNoKC8oXC0/XGQrKFwuXGQrKT8pW1wsIF0oXC0/XGQrKFwuXGQrKT8pW1wsIF0oXC0/XGQrKFwuXGQrKT8pW1wsIF0oXC0/XGQrKFwuXGQrKT8pW1wsIF0oXC0/XGQrKFwuXGQrKT8pW1wsIF0oXC0/XGQrKFwuXGQrKT8pXCkkLyk7DQogICAgICAgIHZhciBtYUFyciA9IFtwYXJzZUZsb2F0KHBwc1sxXSkscGFyc2VGbG9hdChwcHNbM10pLHBhcnNlRmxvYXQocHBzWzVdKSxwYXJzZUZsb2F0KHBwc1s3XSkscGFyc2VGbG9hdChwcHNbOV0pLHBhcnNlRmxvYXQocHBzWzExXSldOw0KICAgICAgICBpZihtYUFyclsxXSA9PSAwKXsNCiAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChjc1swXSk7DQogICAgICAgICAgICB2YXIgeSA9IHBhcnNlRmxvYXQoY3NbMV0pKzE2Ow0KICAgICAgICAgICAgdmFyIHgxID0geCAqIG1hQXJyWzBdICsgeSAqIG1hQXJyWzJdICsgbWFBcnJbNF07DQogICAgICAgICAgICB2YXIgeTEgPSB4ICogbWFBcnJbMV0gKyB5ICogbWFBcnJbM10gKyBtYUFycls1XTsNCiAgICAgICAgICAgIHgxPXgxLnRvc3VpdHN2ZygpOw0KICAgICAgICAgICAgeTE9eTEudG9zdWl0c3ZnKCk7DQogICAgICAgICAgICB2YXIgdHJzdHIgPSAgJ3RyYW5zbGF0ZSgnK3gxKycsJyt5MSsnKSc7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KGNzWzBdKSsxNjsNCiAgICAgICAgICAgIHZhciB5ID0gcGFyc2VGbG9hdChjc1sxXSkrMTY7DQogICAgICAgICAgICB2YXIgeDEgPSB4ICogbWFBcnJbMF0gKyB5ICogbWFBcnJbMl0gKyBtYUFycls0XTsNCiAgICAgICAgICAgIHZhciB5MSA9IHggKiBtYUFyclsxXSArIHkgKiBtYUFyclszXSArIG1hQXJyWzVdOw0KICAgICAgICAgICAgeCA9IHBhcnNlRmxvYXQoY3NbMF0pKzE2Ow0KICAgICAgICAgICAgeSA9IHBhcnNlRmxvYXQoY3NbMV0pOw0KICAgICAgICAgICAgdmFyIHgyID0geCAqIG1hQXJyWzBdICsgeSAqIG1hQXJyWzJdICsgbWFBcnJbNF07DQogICAgICAgICAgICB2YXIgeTIgPSB4ICogbWFBcnJbMV0gKyB5ICogbWFBcnJbM10gKyBtYUFycls1XTsNCiAgICAgICAgICAgIHZhciBmeCA9IHgxPHgyP3gxLnRvc3VpdHN2ZygpOiB4Mi50b3N1aXRzdmcoKTsNCiAgICAgICAgICAgIHZhciBmeSA9IHkxPnkyP3kxLnRvc3VpdHN2ZygpOiB5Mi50b3N1aXRzdmcoKTsNCgkJCXZhciBvZmZ5ID0gTWF0aC5hYnMoeTEteTIpOwkJCQkJCQkJCQkgIA0KICAgICAgICAgICAgdmFyIHRyc3RyID0gICd0cmFuc2xhdGUoJytmeCsnLCcrZnkrJyknOw0KICAgICAgICAgICAgcG9wdXBSLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JyxvZmZ5LnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgcG9wdXBSLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCcxNicpOw0KICAgICAgICAgICAgcG9wdXBSLnNldEF0dHJpYnV0ZSgneScsKC1vZmZ5KS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIHBvcHVwUi5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCd0cmFuc3BhcmVudCcpOw0KICAgICAgICAgICAgcG9wdXAuYXBwZW5kQ2hpbGQocG9wdXBSKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICB2YXIgYWw9YS5sZW5ndGg7DQogICAgZm9yKHZhciBqPTA7ajxhbDtqKyspew0KICAgICAgICBsaW5rYXJyLnB1c2goYVtqXS5saW5rKTsNCiAgICAgICAgZGVzY2Fyci5wdXNoKGFbal0uZGVzYyk7DQogICAgfQ0KICAgIHBvcHVwLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJyx0cnN0cik7DQogICAgdmFyIG1heD1nZXRtYXhsZW4obGlua2FycixkZXNjYXJyKTsNCiAgICBmb3IodmFyIGs9MDtrPGFsO2srKyl7DQogICAgICAgIHZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdhJyk7DQogICAgICAgIHZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdyZWN0Jyk7DQogICAgICAgIHZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCd0ZXh0Jyk7DQogICAgICAgIHZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCd0ZXh0Jyk7DQogICAgICAgIGlmKGlzTmFOKGxpbmthcnJba10pKXsNCiAgICAgICAgICAgIGMuc2V0QXR0cmlidXRlTlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgInhsaW5rIiwgImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiKTsNCiAgICAgICAgICAgIGMuc2V0QXR0cmlidXRlTlMoImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLCAiaHJlZiIsIGxpbmthcnJba10pOw0KICAgICAgICAgICAgYy5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsJ19ibGFuaycpOw0KICAgICAgICAgICAgZS50ZXh0Q29udGVudD1saW5rYXJyW2tdOw0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgIGUudGV4dENvbnRlbnQ9J1BhZ2UtJytsaW5rYXJyW2tdOw0KICAgICAgICAgICAgYy5zZXRBdHRyaWJ1dGVOUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCAieGxpbmsiLCAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIpOw0KICAgICAgICAgICAgYy5zZXRBdHRyaWJ1dGVOUygiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsICJocmVmIiwgIiMiK2xpbmthcnJba10pOw0KICAgICAgICB9DQogICAgICAgIGQuc2V0QXR0cmlidXRlKCd3aWR0aCcsbWF4KzEwKTsNCiAgICAgICAgZC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsJzMzJyk7DQogICAgICAgIGQuc2V0QXR0cmlidXRlKCdzdHJva2UnLCcjOTk5OTk5Jyk7DQogICAgICAgIGQuc2V0QXR0cmlidXRlKCdmaWxsJywnd2hpdGUnKTsNCiAgICAgICAgZC5zZXRBdHRyaWJ1dGUoJ3knLDMzKmspOw0KICAgICAgICBmLnRleHRDb250ZW50PWRlc2NhcnJba107DQogICAgICAgIGYuc3R5bGUuZm9udFNpemU9JzEycHgnOw0KICAgICAgICBmLnN0eWxlLmZvbnRXZWlnaHQ9J2JvbGQnOw0KICAgICAgICBmLnNldEF0dHJpYnV0ZSgneCcsNSk7DQogICAgICAgIGYuc2V0QXR0cmlidXRlKCd5JywzMyprKzEyKTsNCiAgICAgICAgZS5zdHlsZS5mb250U2l6ZT0nMTJweCc7DQogICAgICAgIGUuc2V0QXR0cmlidXRlKCd5JywzMyprKzI4KTsNCiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoJ3gnLDUpOw0KICAgICAgICBjLmFwcGVuZENoaWxkKGQpOw0KICAgICAgICBjLmFwcGVuZENoaWxkKGYpOw0KICAgICAgICBjLmFwcGVuZENoaWxkKGUpOw0KICAgICAgICBjLm9ubW91c2VvdmVyPWZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcigncmVjdCcpLnN0eWxlLmZpbGw9JyNlMWUxZmYnDQogICAgICAgIH07DQogICAgICAgIGMub25tb3VzZW91dD1mdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3JlY3QnKS5zdHlsZS5maWxsPSd3aGl0ZScNCiAgICAgICAgfTsNCiAgICAgICAgcG9wdXAuYXBwZW5kQ2hpbGQoYyk7DQogICAgfQ0KICAgIHBvcHVwLnN0eWxlLmRpc3BsYXk9J25vbmUnOw0KICAgIHBvcHVwLnNldEF0dHJpYnV0ZSgnaHlwZXJsaW5rJywnJyk7DQogICAgcG9wdXAuc2V0QXR0cmlidXRlKCdlZDpsaW5raWQnLGxpbmtzW2ldLnBhcmVudE5vZGUuaWQpOw0KICAgIHBvcHVwLm9ubW91c2VvdmVyPWZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5PSdibG9jayc7DQogICAgfTsNCiAgICBwb3B1cC5vbmNsaWNrPWZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5PSdub25lJzsNCiAgICB9Ow0KICAgIHBvcHVwLm9ubW91c2VvdXQ9ZnVuY3Rpb24gKCkgew0KICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXk9J25vbmUnOw0KICAgIH07DQogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N2Zy1jb250YWluZXIgPiBzdmcnKS5hcHBlbmRDaGlsZChwb3B1cCk7DQogICAgbGlua3NbaV0ub25tb3VzZW92ZXI9ZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgbGlua2lkPXRoaXMucGFyZW50Tm9kZS5pZDsNCiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKCdyZWN0Jykuc3R5bGUuZGlzcGxheT0nYmxvY2snOw0KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJnW2VkXFw6bGlua2lkPSciK2xpbmtpZCsiJ11baHlwZXJsaW5rXSIpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsNCiAgICB9DQogICAgbGlua3NbaV0ub25tb3VzZW91dD1mdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBsaW5raWQ9dGhpcy5wYXJlbnROb2RlLmlkOw0KICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3JlY3QnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsNCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZ1tlZFxcOmxpbmtpZD0nIitsaW5raWQrIiddW2h5cGVybGlua10iKS5zdHlsZS5kaXNwbGF5PSdub25lJzsNCiAgICB9DQp9DQovLy0taHlwZXJsaW5rDQovL2luaXRpYWxpemUtLQ0KdmFyIHNoYXBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2dbZWRcXDp0b2d0b3BpY2lkXScpOw0KdmFyIG1JZD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdnW2VkXFw6dG9waWN0eXBlXScpOw0KdmFyIGRhdGFUcmVlPXt9Ow0KdmFyIGV4dHJhUmVsYT17fTsNCnZhciBjaGVja0lEPScnOw0KZm9yKHZhciBpPTA7aTxtSWQubGVuZ3RoO2krKyl7DQogICAgdmFyIHR5cGU9bUlkW2ldLmdldEF0dHJpYnV0ZSgnZWQ6dG9waWN0eXBlJyk7DQogICAgdmFyIHNpZD1tSWRbaV0uaWQ7DQogICAgaWYodHlwZSE9PSdjYWxsb3V0Jyl7DQogICAgICAgIGluaXQoc2lkLGRhdGFUcmVlKQ0KICAgIH0NCn0NCmZ1bmN0aW9uIGluaXQoaWQsIG9iaikgew0KICAgIHZhciBjaGlsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJnW2VkXFw6cGFyZW50aWQ9JyIgKyBpZCArICInXTpub3QoW2VkXFw6dG9waWN0eXBlXSkiKTsNCiAgICB2YXIgY2FsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJnW2VkXFw6cGFyZW50aWQ9JyIgKyBpZCArICInXVtlZFxcOnRvcGljdHlwZV0iKTsNCiAgICB2YXIgc3VtbWFyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInBhdGhbZWRcXDpwYXJlbnRpZCo9JyIgKyBpZCArICInXVtlZFxcOnR5cGU9J3N1bW1hcnknXSIpOw0KICAgIHZhciBib3VuZGFyeT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgicGF0aFtlZFxcOnBhcmVudGlkKj0nIiArIGlkICsgIiddW2VkXFw6dHlwZT0nYm91bmRhcnknXSIpOw0KICAgIHZhciByZWxhZnJvbT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJnW2VkXFw6ZnJvbWlkKj0nIiArIGlkICsgIiddW2VkXFw6dHlwZT0ncmVsYXRpb24nXSIpOw0KICAgIHZhciByZWxhdG89ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiZ1tlZFxcOnRvaWQqPSciICsgaWQgKyAiJ11bZWRcXDp0eXBlPSdyZWxhdGlvbiddIik7DQogICAgb2JqWyJtIiArIGlkXSA9IHt9Ow0KICAgIHZhciB0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmdldEF0dHJpYnV0ZSgnZWQ6dG9waWN0eXBlJyk7DQogICAgdmFyIGl3PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5nZXRBdHRyaWJ1dGUoJ2VkOndpZHRoJyk7DQogICAgdmFyIGloPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5nZXRBdHRyaWJ1dGUoJ2VkOmhlaWdodCcpOw0KICAgIGlmICh0eXBlKSB7DQogICAgICAgIG9ialsibSIgKyBpZF0udHlwZSA9IHR5cGU7DQogICAgfQ0KICAgIGlmKGl3JiZpaCl7DQogICAgICAgIG9ialsibSIgKyBpZF0ud2lkdGggPWl3Ow0KICAgICAgICBvYmpbIm0iICsgaWRdLmhlaWdodCA9aWg7DQogICAgfQ0KICAgIGlmIChyZWxhZnJvbS5sZW5ndGggIT09IDApIHsNCiAgICAgICAgb2JqWyJtIiArIGlkXS5yZWxhZnJvbSA9IHt9Ow0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbGFmcm9tLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB2YXIgaW5kZXhpZCA9IHJlbGFmcm9tW2ldLmlkOw0KICAgICAgICAgICAgdmFyIHRvaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbmRleGlkKS5nZXRBdHRyaWJ1dGUoJ2VkOnRvaWQnKTsNCiAgICAgICAgICAgIGlmIChleHRyYVJlbGFbaW5kZXhpZF0gPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgIGV4dHJhUmVsYVtpbmRleGlkXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgaWQ6IGluZGV4aWQsDQogICAgICAgICAgICAgICAgICAgIGZyb21pZDogaWQsDQogICAgICAgICAgICAgICAgICAgIHRvaWQ6IHRvaWQsDQogICAgICAgICAgICAgICAgICAgIGlzQzogZmFsc2UNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgb2JqWyJtIiArIGlkXS5yZWxhZnJvbVtpbmRleGlkXT17fTsNCiAgICAgICAgICAgIG9ialsibSIgKyBpZF0ucmVsYWZyb20uZGlzcGxheT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnPydibG9jayc6J25vbmUnOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChyZWxhdG8ubGVuZ3RoICE9PSAwKSB7DQogICAgICAgIG9ialsibSIgKyBpZF0ucmVsYXRvID0ge307DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVsYXRvLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB2YXIgaW5kZXhpZD1yZWxhdG9baV0uaWQ7DQogICAgICAgICAgICB2YXIgZnJvbWlkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGluZGV4aWQpLmdldEF0dHJpYnV0ZSgnZWQ6ZnJvbWlkJyk7DQogICAgICAgICAgICBpZihleHRyYVJlbGFbaW5kZXhpZF0gPT09IHVuZGVmaW5lZCl7DQogICAgICAgICAgICAgICAgZXh0cmFSZWxhW2luZGV4aWRdPXsNCiAgICAgICAgICAgICAgICAgICAgaWQ6aW5kZXhpZCwNCiAgICAgICAgICAgICAgICAgICAgZnJvbWlkOmZyb21pZCwNCiAgICAgICAgICAgICAgICAgICAgdG9pZDppZCwNCiAgICAgICAgICAgICAgICAgICAgaXNDOmZhbHNlDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG9ialsibSIgKyBpZF0ucmVsYXRvW2luZGV4aWRdPXt9Ow0KICAgICAgICAgICAgb2JqWyJtIiArIGlkXS5yZWxhdG8uZGlzcGxheT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnPydibG9jayc6J25vbmUnOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChjaGlsZHMubGVuZ3RoICE9PSAwKSB7DQogICAgICAgIG9ialsibSIgKyBpZF0uY2hpbGQgPSB7fTsNCiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImdbZWRcXDp0b2d0b3BpY2lkPSciICsgaWQgKyAiJ10iKSkgew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZ1tlZFxcOnRvZ3RvcGljaWQ9JyIgKyBpZCArICInXSIpLmNoaWxkTm9kZXNbMF0uZ2V0QXR0cmlidXRlKCd4bGluazpocmVmJykpOw0KICAgICAgICAgICAgdmFyIHRvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImdbZWRcXDp0b2d0b3BpY2lkPSciICsgaWQgKyAiJ10iKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndXNlJylbMF0uZ2V0QXR0cmlidXRlKCd4bGluazpocmVmJykuc2xpY2UoMSk7DQogICAgICAgICAgICBvYmpbIm0iICsgaWRdLnRvZ3R5cGUgPSB0b2c7DQogICAgICAgIH0NCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHZhciBjaWQgPSBjaGlsZHNbaV0uaWQ7DQogICAgICAgICAgICBpbml0KGNpZCwgb2JqWyJtIiArIGlkXS5jaGlsZCk7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKGNhbGxzLmxlbmd0aCAhPT0gMCkgew0KICAgICAgICBvYmpbIm0iICsgaWRdLmNhbGwgPSB7fTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxscy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdmFyIGNpZCA9IGNhbGxzW2ldLmlkOw0KICAgICAgICAgICAgaW5pdChjaWQsIG9ialsibSIgKyBpZF0uY2FsbCk7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKGJvdW5kYXJ5Lmxlbmd0aCAhPT0gMCkgew0KICAgICAgICBvYmpbIm0iICsgaWRdLmJvdW5kYXJ5ID0ge307DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm91bmRhcnkubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHZhciBjaWQgPWJvdW5kYXJ5W2ldLmlkOw0KICAgICAgICAgICAgaW5pdChjaWQsIG9ialsibSIgKyBpZF0uYm91bmRhcnkpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChzdW1tYXJ5Lmxlbmd0aCAhPT0gMCkgew0KICAgICAgICBvYmpbIm0iICsgaWRdLnN1bW1hcnkgPSB7fTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdW1tYXJ5Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB2YXIgY2lkID0gc3VtbWFyeVtpXS5pZDsNCiAgICAgICAgICAgIGluaXQoY2lkLCBvYmpbIm0iICsgaWRdLnN1bW1hcnkpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KLy8tLWluaXRpYWxpemUNCi8vdG9nZ2xlZGlzcGxheS0tDQp2YXIgY2hhaW5BcnI9W107DQpmdW5jdGlvbiBnZXRjaGFpbihpZCl7DQogICAgY2hhaW5BcnIudW5zaGlmdCgnbScraWQpOw0KICAgIHZhciBwYXJlbnQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmdldEF0dHJpYnV0ZSgnZWQ6cGFyZW50aWQnKTsNCiAgICBpZighcGFyZW50KXsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCglpZihwYXJlbnQubWF0Y2goL1wsLykpew0KICAgICAgICBwYXJlbnQgPSBwYXJlbnQubWF0Y2goL1xkKyg/PVwsKS8pWzBdDQogICAgfQ0KICAgIGdldGNoYWluKHBhcmVudCk7DQp9DQpmdW5jdGlvbiBnZXRvYmooaWQpIHsNCiAgICBjaGFpbkFycj1bXTsNCiAgICBnZXRjaGFpbihpZCk7DQogICAgdmFyIG1haW49Y2hhaW5BcnJbMF07DQogICAgaWYoY2hhaW5BcnIubGVuZ3RoPjEpew0KICAgICAgICB2YXIgb2JqPWRhdGFUcmVlW21haW5dOw0KICAgICAgICAvLyBjb25zb2xlLmxvZyhjaGFpbkFycik7DQogICAgICAgIGZvcih2YXIgaT0xO2k8Y2hhaW5BcnIubGVuZ3RoO2krKykgew0KICAgICAgICAgICAgdmFyIGEgPSBjaGFpbkFycltpXTsNCiAgICAgICAgICAgIGZvcih2YXIgaj0wO2o8T2JqZWN0LmtleXMob2JqKS5sZW5ndGg7aisrKXsNCiAgICAgICAgICAgICAgICB2YXIgY29iaj0gb2JqW09iamVjdC5rZXlzKG9iailbal1dW2FdOw0KICAgICAgICAgICAgICAgIGlmKGNvYmopew0KICAgICAgICAgICAgICAgICAgICBvYmo9Y29iajsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG9iag0KICAgIH1lbHNlew0KICAgICAgICB2YXIgb2JqPWRhdGFUcmVlW21haW5dOw0KICAgICAgICByZXR1cm4gb2JqDQogICAgfQ0KDQp9DQpmb3IodmFyIGk9MDtpPHNoYXBlLmxlbmd0aDtpKyspew0KICAgIHNoYXBlW2ldLm9uY2xpY2s9ZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgaWQ9TnVtYmVyKHRoaXMuZ2V0QXR0cmlidXRlKCdlZDp0b2d0b3BpY2lkJykpOw0KICAgICAgICB2YXIgb2JqPWdldG9iaihpZCk7DQoNCiAgICAgICAgdmFyIHR5cGU9b2JqLnRvZ3R5cGU9PT0nbWludXMnPydwbHVzJzonbWludXMnOw0KICAgICAgICB2YXIgZGlzcGxheT1vYmoudG9ndHlwZT09PSdtaW51cyc/J25vbmUnOidibG9jayc7DQogICAgICAgIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3VzZScpWzBdLnNldEF0dHJpYnV0ZSgneGxpbms6aHJlZicsJyMnK3R5cGUpOw0KICAgICAgICBvYmoudG9ndHlwZT10eXBlOw0KICAgICAgICBjaGVja0lEPW9iajsNCg0KICAgICAgICB1dGQob2JqLGlkLGRpc3BsYXkpOw0KICAgICAgICBleHRyYVJlbGFGaW4oKTsNCiAgICB9DQp9DQpmdW5jdGlvbiB1dGQob2JqLGlkLHNob3csb2MpIHsNCg0KICAgIHZhciBwc2hvdz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSE9PSAnbm9uZSc/J2Jsb2NrJzonbm9uZSc7DQogICAgaWYgKG9iai5yZWxhZnJvbSl7DQogICAgICAgIGlmKG9iai5yZWxhZnJvbS5kaXNwbGF5IT09IHBzaG93KXsNCiAgICAgICAgICAgIHZhciByZWxhZnJvbXM9T2JqZWN0LmtleXMob2JqLnJlbGFmcm9tKTsNCiAgICAgICAgICAgIHJlbGFmcm9tcy5zcGxpY2UocmVsYWZyb21zLmluZGV4T2YoJ2Rpc3BsYXknKSwxKTsNCiAgICAgICAgICAgIGZvcih2YXIgaz0wO2s8cmVsYWZyb21zLmxlbmd0aDtrKyspew0KICAgICAgICAgICAgICAgIHZhciBkPXJlbGFmcm9tc1trXTsNCiAgICAgICAgICAgICAgICBleHRyYVJlbGFbZF0uaXNDPXRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvYmoucmVsYWZyb20uZGlzcGxheSA9IHBzaG93Ow0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChvYmoucmVsYXRvKXsNCiAgICAgICAgaWYob2JqLnJlbGF0by5kaXNwbGF5IT09IHBzaG93KXsNCiAgICAgICAgICAgIHZhciByZWxhdG9zPU9iamVjdC5rZXlzKG9iai5yZWxhdG8pOw0KICAgICAgICAgICAgcmVsYXRvcy5zcGxpY2UocmVsYXRvcy5pbmRleE9mKCdkaXNwbGF5JyksMSk7DQogICAgICAgICAgICBmb3IodmFyIGs9MDtrPHJlbGF0b3MubGVuZ3RoO2srKyl7DQogICAgICAgICAgICAgICAgdmFyIGQ9cmVsYXRvc1trXTsNCiAgICAgICAgICAgICAgICBleHRyYVJlbGFbZF0uaXNDPXRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvYmoucmVsYXRvLmRpc3BsYXkgPSBwc2hvdzsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZihvYmouY2FsbCl7DQogICAgICAgIHZhciBjYWxscz1PYmplY3Qua2V5cyhvYmouY2FsbCk7DQogICAgICAgIGlmKGNoZWNrSUQhPT1vYmopew0KICAgICAgICAgICAgZm9yKHZhciBpPTA7aSA8IGNhbGxzLmxlbmd0aDtpKyspew0KICAgICAgICAgICAgICAgIHZhciBhPWNhbGxzW2ldLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgIHZhciBiPW9iai5jYWxsW2NhbGxzW2ldXTsNCiAgICAgICAgICAgICAgICB2YXIgYz1iLnRvZ3R5cGU7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSkuc3R5bGUuZGlzcGxheT1zaG93Ow0KICAgICAgICAgICAgICAgIGlmIChiLnJlbGFmcm9tJiYhYyl7DQogICAgICAgICAgICAgICAgICAgIGlmKGIucmVsYWZyb20uZGlzcGxheSE9PSBzaG93KXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWxhZnJvbXM9T2JqZWN0LmtleXMoYi5yZWxhZnJvbSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZWxhZnJvbXMuc3BsaWNlKHJlbGFmcm9tcy5pbmRleE9mKCdkaXNwbGF5JyksMSk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGs9MDtrPHJlbGFmcm9tcy5sZW5ndGg7aysrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZD1yZWxhZnJvbXNba107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFSZWxhW2RdLmlzQz10cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYi5yZWxhZnJvbS5kaXNwbGF5ID0gc2hvdzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoYi5yZWxhdG8mJiFjKXsNCiAgICAgICAgICAgICAgICAgICAgaWYoYi5yZWxhdG8uZGlzcGxheSE9PSBzaG93KXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWxhdG9zPU9iamVjdC5rZXlzKGIucmVsYXRvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0b3Muc3BsaWNlKHJlbGF0b3MuaW5kZXhPZignZGlzcGxheScpLDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrPTA7azxyZWxhdG9zLmxlbmd0aDtrKyspew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkPXJlbGF0b3Nba107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFSZWxhW2RdLmlzQz10cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYi5yZWxhdG8uZGlzcGxheSA9IHNob3c7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYoYyl7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImdbZWRcXDp0b2d0b3BpY2lkPSciK2ErIiddIikuc3R5bGUuZGlzcGxheT1zaG93Ow0KICAgICAgICAgICAgICAgICAgICBpZihjPT09J21pbnVzJyl7DQogICAgICAgICAgICAgICAgICAgICAgICB1dGQoYixhLHNob3cpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKChiLmNhbGx8fGIuYm91bmRhcnl8fGIuc3VtbWFyeSkmJmM9PT0ncGx1cycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHV0ZChiLGEsc2hvdyx0cnVlKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmKGIuY2FsbCYmIWMpIHsNCiAgICAgICAgICAgICAgICAgICAgdXRkKGIsYSxzaG93LHRydWUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChiLnN1bW1hcnkmJiFjKSB7DQogICAgICAgICAgICAgICAgICAgIHV0ZChiLGEsc2hvdykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGIuYm91bmRhcnkmJiFjKSB7DQogICAgICAgICAgICAgICAgICAgIHV0ZChiLGEsc2hvdykNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZihvYmouc3VtbWFyeSl7DQogICAgICAgIHZhciBzdW1tYXJ5cz1PYmplY3Qua2V5cyhvYmouc3VtbWFyeSk7DQogICAgICAgIGlmKChjaGVja0lEIT09b2JqJiYob2JqLnRvZ3R5cGU9PT0nbWludXMnfHwhb2JqLnRvZ3R5cGUpKXx8Y2hlY2tJRD09PW9iail7DQogICAgICAgICAgICBmb3IodmFyIGk9MDtpPHN1bW1hcnlzLmxlbmd0aDtpKyspew0KICAgICAgICAgICAgICAgIHZhciBhPXN1bW1hcnlzW2ldLnNsaWNlKDEpOw0KCQkJCXZhciBvc3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKS5nZXRBdHRyaWJ1dGUoJ2VkOnBhcmVudGlkJyk7DQogICAgICAgICAgICAgICAgaWYob3NwLm1hdGNoKC9cLC8pKXsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9zcGEgPSBvc3Auc3BsaXQoJywnKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9zcEw9MDsNCg0KICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGo9MDtqPG9zcGEubGVuZ3RoO2orKyl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZihzaG93ID09ICdub25lJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3NwYVtqXSkuc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NwTCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKS5zdHlsZS5kaXNwbGF5ICE9ICdub25lJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvc3BMKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmKG9zcEwgIT09IG9zcGEubGVuZ3RoKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBiPW9iai5zdW1tYXJ5W3N1bW1hcnlzW2ldXTsNCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKS5zdHlsZS5kaXNwbGF5PXNob3c7DQovLyAgICAgICAgICAgICAgICBpZihjKXsNCi8vICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJnW2VkXFw6dG9ndG9waWNpZD0nIithKyInXSIpLnN0eWxlLmRpc3BsYXk9c2hvdzsNCi8vICAgICAgICAgICAgICAgICAgICBpZihjPT09J21pbnVzJyl7DQovLyAgICAgICAgICAgICAgICAgICAgICAgIHV0ZChiLHNob3cpDQovLyAgICAgICAgICAgICAgICAgICAgfQ0KLy8gICAgICAgICAgICAgICAgICAgIGlmIChiLmNhbGwmJmM9PT0ncGx1cycpIHsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgdXRkKGIsc2hvdyx0cnVlKQ0KLy8gICAgICAgICAgICAgICAgICAgIH0NCi8vICAgICAgICAgICAgICAgIH0NCi8vICAgICAgICAgICAgICAgIGlmKGIuY2FsbCYmIWMpIHsNCi8vICAgICAgICAgICAgICAgICAgICB1dGQoYixzaG93LHRydWUpDQovLyAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXMoYikubGVuZ3RoIT09MCl7DQogICAgICAgICAgICAgICAgICAgIHV0ZChiLGEsc2hvdykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgaWYob2JqLmJvdW5kYXJ5KXsNCiAgICAgICAgdmFyIGJvdW5kYXJ5cz1PYmplY3Qua2V5cyhvYmouYm91bmRhcnkpOw0KICAgICAgICBpZihjaGVja0lEIT09b2JqKXsNCiAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8Ym91bmRhcnlzLmxlbmd0aDtpKyspew0KICAgICAgICAgICAgICAgIHZhciBhPWJvdW5kYXJ5c1tpXS5zbGljZSgxKTsNCiAgICAgICAgICAgICAgICB2YXIgYj1vYmouYm91bmRhcnlbYm91bmRhcnlzW2ldXTsNCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKS5zdHlsZS5kaXNwbGF5PXNob3c7DQovLyAgICAgICAgICAgICAgICBpZihjKXsNCi8vICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJnW2VkXFw6dG9ndG9waWNpZD0nIithKyInXSIpLnN0eWxlLmRpc3BsYXk9c2hvdzsNCi8vICAgICAgICAgICAgICAgICAgICBpZihjPT09J21pbnVzJyl7DQovLyAgICAgICAgICAgICAgICAgICAgICAgIHV0ZChiLHNob3cpDQovLyAgICAgICAgICAgICAgICAgICAgfQ0KLy8gICAgICAgICAgICAgICAgICAgIGlmIChiLmNhbGwmJmM9PT0ncGx1cycpIHsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgdXRkKGIsc2hvdyx0cnVlKQ0KLy8gICAgICAgICAgICAgICAgICAgIH0NCi8vICAgICAgICAgICAgICAgIH0NCi8vICAgICAgICAgICAgICAgIGlmKGIuY2FsbCYmIWMpIHsNCi8vICAgICAgICAgICAgICAgICAgICB1dGQoYixzaG93LHRydWUpDQovLyAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXMoYikubGVuZ3RoIT09MCl7DQogICAgICAgICAgICAgICAgICAgIHV0ZChiLGEsc2hvdykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgaWYoIW9jJiZvYmouY2hpbGQpIHsNCiAgICAgICAgdmFyIGNoaWxkcyA9IE9iamVjdC5rZXlzKG9iai5jaGlsZCk7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB2YXIgYSA9IGNoaWxkc1tpXS5zbGljZSgxKTsNCiAgICAgICAgICAgIHZhciBiID0gb2JqLmNoaWxkW2NoaWxkc1tpXV07DQogICAgICAgICAgICB2YXIgYyA9IGIudG9ndHlwZTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpLnN0eWxlLmRpc3BsYXkgPSBzaG93Ow0KCQkJdmFyIHRTUGF0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInBhdGhbZWRcXDp0b3N1cGVyaWQ9JyIrYSsiJ10iKTsNCiAgICAgICAgICAgIGlmKHRTUGF0aCl7DQogICAgICAgICAgICAgICAgdFNQYXRoLnN0eWxlLmRpc3BsYXkgPSBzaG93Ow0KICAgICAgICAgICAgfQ0KCQkJdmFyIG5vdGVUaXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJnW2VkXFw6bm90ZXRvPSciK2ErIiddIik7DQogICAgICAgICAgICBpZihub3RlVGlwKXsNCiAgICAgICAgICAgICAgICBub3RlVGlwLnN0eWxlLmRpc3BsYXkgPSBzaG93Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGIucmVsYWZyb20mJiFjKXsNCiAgICAgICAgICAgICAgICBpZihiLnJlbGFmcm9tLmRpc3BsYXkhPT0gc2hvdyl7DQogICAgICAgICAgICAgICAgICAgIHZhciByZWxhZnJvbXM9T2JqZWN0LmtleXMoYi5yZWxhZnJvbSk7DQogICAgICAgICAgICAgICAgICAgIHJlbGFmcm9tcy5zcGxpY2UocmVsYWZyb21zLmluZGV4T2YoJ2Rpc3BsYXknKSwxKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrPTA7azxyZWxhZnJvbXMubGVuZ3RoO2srKyl7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZD1yZWxhZnJvbXNba107DQogICAgICAgICAgICAgICAgICAgICAgICBleHRyYVJlbGFbZF0uaXNDPXRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYi5yZWxhZnJvbS5kaXNwbGF5ID0gc2hvdzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoYi5yZWxhdG8mJiFjKXsNCiAgICAgICAgICAgICAgICBpZihiLnJlbGF0by5kaXNwbGF5IT09IHNob3cpew0KICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRvcz1PYmplY3Qua2V5cyhiLnJlbGF0byk7DQogICAgICAgICAgICAgICAgICAgIHJlbGF0b3Muc3BsaWNlKHJlbGF0b3MuaW5kZXhPZignZGlzcGxheScpLDEpOw0KICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGs9MDtrPHJlbGF0b3MubGVuZ3RoO2srKyl7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZD1yZWxhdG9zW2tdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFSZWxhW2RdLmlzQz10cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGIucmVsYXRvLmRpc3BsYXkgPSBzaG93Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChjKSB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZ1tlZFxcOnRvZ3RvcGljaWQ9JyIgKyBhICsgIiddIikuc3R5bGUuZGlzcGxheSA9IHNob3c7DQogICAgICAgICAgICAgICAgaWYgKGMgPT09ICdtaW51cycpIHsNCiAgICAgICAgICAgICAgICAgICAgdXRkKGIsYSxzaG93KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoKGIuY2FsbHx8Yi5ib3VuZGFyeXx8Yi5zdW1tYXJ5KSYmYz09PSdwbHVzJykgew0KICAgICAgICAgICAgICAgICAgICB1dGQoYixhLHNob3csdHJ1ZSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoYi5jYWxsJiYhYykgew0KICAgICAgICAgICAgICAgIHV0ZChiLGEsc2hvdyx0cnVlKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGIuc3VtbWFyeSYmIWMpIHsNCiAgICAgICAgICAgICAgICB1dGQoYixhLHNob3cpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoYi5ib3VuZGFyeSYmIWMpIHsNCiAgICAgICAgICAgICAgICB1dGQoYixhLHNob3cpDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGV4dHJhUmVsYUZpbigpIHsNCiAgICB2YXIgZXh0cmFrZXlzPU9iamVjdC5rZXlzKGV4dHJhUmVsYSk7DQogICAgZm9yKHZhciBpPTA7aTxleHRyYWtleXMubGVuZ3RoO2krKyl7DQogICAgICAgIHZhciBleHRyYU9iaj1leHRyYVJlbGFbZXh0cmFrZXlzW2ldXTsNCiAgICAgICAgaWYoZXh0cmFPYmouaXNDID09PSB0cnVlKXsNCiAgICAgICAgICAgIHZhciBmc2hvdz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChleHRyYU9iai5mcm9taWQpLnN0eWxlLmRpc3BsYXkgIT09J25vbmUnPyB0cnVlOiBmYWxzZTsNCiAgICAgICAgICAgIHZhciB0c2hvdz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChleHRyYU9iai50b2lkKS5zdHlsZS5kaXNwbGF5ICE9PSdub25lJz8gdHJ1ZTogZmFsc2U7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChleHRyYU9iai5pZCkuc3R5bGUuZGlzcGxheT1mc2hvdyAmJiB0c2hvdz8gJ2Jsb2NrJzogJ25vbmUnOw0KICAgICAgICAgICAgZXh0cmFSZWxhW2V4dHJha2V5c1tpXV0uaXNDID0gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQp9'))</script>
  </body>
</html>
